<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xml:space="preserve"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>xqDoc -- Module</title><script language="JavaScript"><!--
        function popUp(URL) {
                 day = new Date();
                 id = day.getTime();
                 eval("page = window.open(URL, 'xqdoccode', 'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1,width=600,height=400,left = 412,top = 334');")
                 page.focus();
        }
      --></script><script language="JavaScript"><!--
	    function litePopUp(str) {    
  		  OpenWindow=window.open('', 'xqdoccode', 'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1,width=600,height=400,left = 412,top = 334');
  		  OpenWindow.document.write('<html xmlspace="preserve">');
  		  OpenWindow.document.write('<head>');
  		  OpenWindow.document.write('<title>xqDoc - Code Sample</title>');
  		  OpenWindow.document.write('</head>');  		    		    		  
  		  OpenWindow.document.write('<body xml:space="preserve">');
  		  OpenWindow.document.write('<pre>');
 		  OpenWindow.document.write(str);
 		  OpenWindow.document.write('</pre>');
  		  OpenWindow.document.write('</body>');
  		  OpenWindow.document.write('</html>');
  		  OpenWindow.document.close();
  		  page.focus();
        }
      --></script><style><!--
body		{
		font: 80% Verdana;
		}
table		{
		font-size: 100%;
		}
h1, h2, h3, h4, h5, h6
		{
		clear: both;
		float: none;
		}
h1		{
		font-size: 100%;
		margin: 0em;
		}
h2		{
		font-size: 180%;
		margin-bottom: -1em;
		margin-top: .3em;
		}
h3		{
		font-size: 150%;
		}	
h4		{
		font-size: 140%;
		background-color: #ccf;
		border-bottom: 1px solid #99f;
		width: 100%;
		}
h5		{
		margin: 1em 0em 0em 0em;
		font-size: 120%;
		}
h6		{
		margin: 0em 0em 0em 3em;
		font-style: italic;
		font: bold italic;
		font-size: 100%;
		}
#variables, #methods, #methoddetail
		{
		padding-left: 3em;
		margin-bottom: 1.4em;
		clear: both;
		float: none;
		}
#methods ul.method, #variables ul.method
		{
		margin: 1em 0em 0em;
		}
#methoddetail ul.method
		{
		margin: 0em;
		}
div.inexternal
		{
		padding-left: 2em;
		margin-bottom: 1em;
		}
div.methoddetail p
		{
		float: none;
		clear: both;
		padding-left: 2em;
		margin-bottom: 1em;
		}
div.methoddetail{
		padding-bottom: 1em;
		}
div.methoddetail li
		{
		list-style-type: none;
		font-weight: bold;
		}
div.methoddetail li li
		{
		list-style-type: circle;
		font-weight: normal;
		}
div.methoddetail li ul
		{
		padding-bottom: 0.5em;
		font-weight: normal;
		}
table.inexternal{
		clear: both;
		float: none;
		width: 80%;
		margin-left: 3em;
		padding: 0em;
		
		}
table.inexternal th
		{
		background-color:#dedede;
		width: 50%;
		}			
td		{
		vertical-align: top;
		}
div.description {
		margin-top: .5em;
		font-weight: normal;
		padding-left: 1em;
		}
ul.method	{
		clear: both;
		float: none;
		width: 90%;
		list-style-type: none;
		border-top: 1px solid #ccc;
		}
ul.method li.left
		{
		float: left;
		clear: none;
		width: 40%;
		font-weight: bold;
		margin-bottom: 2em;
		}
ul.method li.right
		{
		position: relative;
            top: 0em;
		float: left;
            width: 55%;
		margin-bottom: 2em;
		padding-left: 2em;
		}
div.home 	{
		width: 60%;
		float: left;
		margin-right: 1%;
		border: 1px
		}
div.home h4	{
		font-size: 120%;
		background-color: #fff;
		border-bottom: 1px solid #99f;
		width: 100%;
		margin-bottom: -1em;
		}
div.overview p {
               width: 60%;
               }
     
 --></style></head><body><h4>Module URI</h4><h1>xqdoc-display.xqy</h1><h4>Module Description</h4><p>   This module provides the functions that control the Web presentation  of xqDoc. The logic contained in this module is not specific to any  XQuery implementation and is written to the Nov 2005 XQuery working  draft specification.    It should also be noted that these functions not only support the   real-time presentation of the xqDoc information but are also used  for the static offline presentation mode as well.  The static offline  presentation mode has advantages because access to a native XML   database is not needed when viewing the xqDoc information ... it is  only needed when generating the offline materials.  </p><ul><li><strong>Author:&nbsp;</strong> Darin McBeath</li><li><strong>Version:&nbsp;</strong> 1.2 </li><li><strong>Since:&nbsp;</strong> January 25, 2006</li></ul><h4>Variables</h4><div id="variables"><div><a name="$module"></a><ul class="method"><li class="left">$module</li><li class="right"> The XQuery module URI to process (passed as an external variable). </li></ul><ul></ul></div><div><a name="$XQDOC_LITE"></a><ul class="method"><li class="left">$XQDOC_LITE</li><li class="right"> A true value indicates that the 'lite' version of xqDoc will be used. </li></ul><ul></ul><div class="methoddetail"><h6>Internal Functions that reference this Variable</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="14">xqdoc-display.xqy</td><td><a href="#build-link">build-link</a></td></tr><tr><td><a href="#get-module-html">get-module-html</a></td></tr><tr><td><a href="#print-comment-see">print-comment-see</a></td></tr><tr><td><a href="#print-external-functions-invoked">print-external-functions-invoked</a></td></tr><tr><td><a href="#print-external-variables-referenced">print-external-variables-referenced</a></td></tr><tr><td><a href="#print-footer">print-footer</a></td></tr><tr><td><a href="#print-imports">print-imports</a></td></tr><tr><td><a href="#print-internal-functions-invoked">print-internal-functions-invoked</a></td></tr><tr><td><a href="#print-internal-functions-invoked-by">print-internal-functions-invoked-by</a></td></tr><tr><td><a href="#print-internal-variable-references">print-internal-variable-references</a></td></tr><tr><td><a href="#print-internal-variables-referenced">print-internal-variables-referenced</a></td></tr><tr><td><a href="#print-method-detail">print-method-detail</a></td></tr><tr><td><a href="#print-module">print-module</a></td></tr><tr><td><a href="#print-variables">print-variables</a></td></tr></table></div></div><div><a name="$XQDOC_COLLECTION"></a><ul class="method"><li class="left">$XQDOC_COLLECTION</li><li class="right">   This variable defines the name for the xqDoc collection.  The xqDoc XML for all modules should be stored into the  XML database with this collection value. </li></ul><ul></ul><div class="methoddetail"><h6>Internal Functions that reference this Variable</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="4">xqdoc-display.xqy</td><td><a href="#print-external-functions-invoked-by">print-external-functions-invoked-by</a></td></tr><tr><td><a href="#print-external-variable-references">print-external-variable-references</a></td></tr><tr><td><a href="#print-imports">print-imports</a></td></tr><tr><td><a href="#print-modules">print-modules</a></td></tr></table></div></div><div><a name="$XQDOC_URIS"></a><ul class="method"><li class="left">$XQDOC_URIS</li><li class="right">   This variable contains the list of URIs for all of the modules  available to xqDoc for presentation.  Each module should be identified by  a unique URI in the XML databse.  </li></ul><ul></ul><div class="methoddetail"><h6>Internal Functions that reference this Variable</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#get-module-uris">get-module-uris</a></td></tr></table></div></div></div>&nbsp; &nbsp;<h4>Function Summary</h4><div id="methods"><a name="methods"></a><ul class="method"><li class="left"><a href="#build-link">build-link</a><div class="description">  Construct a link.</div></li><li class="right">( $type as xs:string ,<br>&nbsp; $local as xs:boolean ,<br>&nbsp; $parms as xs:string* ,<br>&nbsp; $name as xs:string?) as element()?<br><br></li></ul><ul class="method"><li class="left"><a href="#decode-uri">decode-uri</a><div class="description"> Decode the uri.</div></li><li class="right">( $uri as xs:string) as xs:string<br><br></li></ul><ul class="method"><li class="left"><a href="#get-code-html">get-code-html</a><div class="description">  Construct the HTML that will contain the XQuery code for the function  in the current module (or the entire module).</div></li><li class="right">( $module as xs:string ,<br>&nbsp; $name as xs:string? ,<br>&nbsp; $local as xs:boolean) as element()<br><br></li></ul><ul class="method"><li class="left"><a href="#get-default-html">get-default-html</a><div class="description">  Construct the HTML for the xqDoc home page.</div></li><li class="right">( $local as xs:boolean) as element()<br><br></li></ul><ul class="method"><li class="left"><a href="#get-function-names">get-function-names</a><div class="description">  Construct a list of function names defined in the current module.</div></li><li class="right">( $module as xs:string) as xs:string*<br><br></li></ul><ul class="method"><li class="left"><a href="#get-module-html">get-module-html</a><div class="description">  Construct the HTML for a xqDoc module page.</div></li><li class="right">( $module as xs:string ,<br>&nbsp; $local as xs:boolean) as element()<br><br></li></ul><ul class="method"><li class="left"><a href="#get-module-uris">get-module-uris</a><div class="description">  Construct a list of module uris contained in xqDoc.</div></li><li class="right">( ) as xs:string*<br><br></li></ul><ul class="method"><li class="left"><a href="#get-stylesheet">get-stylesheet</a><div class="description">  Get the xqDoc presentation stylesheet.</div></li><li class="right">( ) as element()<br><br></li></ul><ul class="method"><li class="left"><a href="#module-uri">module-uri</a><div class="description"> Find the module uri for the associated element.</div></li><li class="right">( $e as element()) as xs:string<br><br></li></ul><ul class="method"><li class="left"><a href="#print-comment">print-comment</a><div class="description">  Construct the xqDoc HTML for the specified xqDoc comment.</div></li><li class="right">( $comment as element()* ,<br>&nbsp; $name as xs:string? ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#print-comment-param">print-comment-param</a><div class="description">  Construct the xqDoc HTML for the specified xqDoc param comment element.</div></li><li class="right">( $entry as element()) as item()*<br><br></li></ul><ul class="method"><li class="left"><a href="#print-comment-see">print-comment-see</a><div class="description">  Construct the xqDoc HTML for the specified xqDoc see comment element.</div></li><li class="right">( $entry as element() ,<br>&nbsp; $local as xs:boolean) as item()*<br><br></li></ul><ul class="method"><li class="left"><a href="#print-detail-comment">print-detail-comment</a><div class="description">  Construct the detailed xqDoc HTML for the specified xqDoc comment.</div></li><li class="right">( $comment as element()* ,<br>&nbsp; $name as xs:string? ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#print-external-functions-invoked">print-external-functions-invoked</a><div class="description">  Construct the information to identify those functions (contained in  other modules) that are used by the current function.</div></li><li class="right">( $function as element() ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#print-external-functions-invoked-by">print-external-functions-invoked-by</a><div class="description">  Construct the information to identify those functions (contained in  other modules) that use the current function.</div></li><li class="right">( $function as element() ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#print-external-variable-references">print-external-variable-references</a><div class="description">  Construct the information to identify those functions (defined in other modules  from the current variable) that used the current variable.</div></li><li class="right">( $variable as element() ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#print-external-variables-referenced">print-external-variables-referenced</a><div class="description">  Construct the information to identify those functions (defined in other modules  from the current variable) that use the current variable.</div></li><li class="right">( $variable as element() ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#print-footer">print-footer</a><div class="description">  Construct the fotter information for the current module.</div></li><li class="right">( $uri as xs:string) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#print-imports">print-imports</a><div class="description">  Construct the high-level xqDoc HTML for any modules  imported by the module.</div></li><li class="right">( $uri as xs:string ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#print-internal-functions-invoked">print-internal-functions-invoked</a><div class="description">  Construct the information to identify those functions (contained in the module  for the current function) that are used by the current function.</div></li><li class="right">( $function as element() ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#print-internal-functions-invoked-by">print-internal-functions-invoked-by</a><div class="description">  Construct the information to identify those functions (contained in the module  for the current function) that use the current function.</div></li><li class="right">( $function as element() ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#print-internal-variable-references">print-internal-variable-references</a><div class="description">  Construct the information to identify those functions (defined in the module  for the current variable) that use the current variable.</div></li><li class="right">( $variable as element() ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#print-internal-variables-referenced">print-internal-variables-referenced</a><div class="description">  Construct the information to identify those functions (defined in the module  for the current variable) that use the current variable.</div></li><li class="right">( $variable as element() ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#print-intro">print-intro</a><div class="description">   Construct the welcome banner for the xqDoc home page.</div></li><li class="right">( $local as xs:boolean) as element()+<br><br></li></ul><ul class="method"><li class="left"><a href="#print-method-detail">print-method-detail</a><div class="description">  Construct the xqDoc HTML method detail for each function defined  in the module.</div></li><li class="right">( $uri as xs:string ,<br>&nbsp; $local as xs:boolean) as item()*<br><br></li></ul><ul class="method"><li class="left"><a href="#print-method-summary">print-method-summary</a><div class="description">  Construct the xqDoc HTML method summary for each function defined  in the module.</div></li><li class="right">( $uri as xs:string) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#print-module">print-module</a><div class="description">  Construct the high-level xqDoc HTML for the module.</div></li><li class="right">( $uri as xs:string ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#print-module-control">print-module-control</a><div class="description">  The controller for constructing the xqDoc HTML information for  the specified module.</div></li><li class="right">( $uri as xs:string ,<br>&nbsp; $local as xs:boolean) as item()+<br><br></li></ul><ul class="method"><li class="left"><a href="#print-module-intro">print-module-intro</a><div class="description">  Construct the welcome banner for the xqDoc module page.</div></li><li class="right">( $local as xs:boolean) as element()<br><br></li></ul><ul class="method"><li class="left"><a href="#print-modules">print-modules</a><div class="description">  Construct the list of modules available to xqDoc for presentation.</div></li><li class="right">( $local as xs:boolean) as element()+<br><br></li></ul><ul class="method"><li class="left"><a href="#print-preserve-newlines">print-preserve-newlines</a><div class="description">  Modify the markup (i.</div></li><li class="right">( $strin as xs:string?) as item()*<br><br></li></ul><ul class="method"><li class="left"><a href="#print-preserve-xqdoc-lite">print-preserve-xqdoc-lite</a><div class="description">  Modify the markup (i.</div></li><li class="right">( $strin as xs:string?) as xs:string*<br><br></li></ul><ul class="method"><li class="left"><a href="#print-signature">print-signature</a><div class="description">  Construct the xqDoc HTML for the function signature.</div></li><li class="right">( $sigs as xs:string* ,<br>&nbsp; $local as xs:boolean) as item()*<br><br></li></ul><ul class="method"><li class="left"><a href="#print-variables">print-variables</a><div class="description">  Construct the high-level xqDoc HTML for any global variables  declared in the module.</div></li><li class="right">( $uri as xs:string ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#xqDoc-main">xqDoc-main</a><div class="description"></div></li><li class="right"></li></ul></div>&nbsp;<h4>Function Detail</h4><div id="methoddetail"><div class="methoddetail" id="build-link"><h5><a name="build-link"></a>build-link</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:build-link($type as xs:string, $local as xs:boolean, $parms as xs:string*, $name as xs:string?) as element()?{<br/&gt;  if ($type = &#34;default&#34;) then<br/&gt;<br/&gt;    if ($local = fn:true()) then<br/&gt;      &amp;lt;a href=&#34;default.html&#34;&amp;gt;<br/&gt;         &amp;lt;h1&amp;gt;xqDoc Home&amp;lt;/h1&amp;gt;<br/&gt;      &amp;lt;/a&amp;gt;<br/&gt;<br/&gt;    else<br/&gt;      &amp;lt;a href=&#34;default.xqy&#34;&amp;gt;<br/&gt;         xqDoc Home<br/&gt;      &amp;lt;/a&amp;gt;<br/&gt;<br/&gt;  else if ($type = &#34;get-module&#34;) then<br/&gt;<br/&gt;    if ($local = fn:true()) then<br/&gt;      &amp;lt;a href=&#34;{fn:concat(&amp;apos;xqdoc-file-&amp;apos;, xs:string(fn:index-of(display:get-module-uris(), $parms[1])), &amp;apos;.html&amp;apos;,<br/&gt;         if (fn:exists($parms[2])) then<br/&gt;           fn:concat(&amp;apos;#&amp;apos;, $parms[2])<br/&gt;         else<br/&gt;           ()<br/&gt;         )}&#34;&amp;gt;<br/&gt;        { $name }<br/&gt;      &amp;lt;/a&amp;gt;<br/&gt;<br/&gt;    else<br/&gt;      &amp;lt;a href=&#34;{fn:concat(&amp;apos;get-module.xqy?module=&amp;apos;, $parms[1],<br/&gt;         if (fn:exists($parms[2])) then<br/&gt;           fn:concat(&amp;apos;#&amp;apos;, $parms[2])<br/&gt;         else<br/&gt;           ()<br/&gt;         )}&#34;&amp;gt;<br/&gt;        { $name }<br/&gt;      &amp;lt;/a&amp;gt;<br/&gt;<br/&gt;<br/&gt;  else if ($type = &#34;get-code&#34;) then<br/&gt;    if ($display:XQDOC_LITE) then<br/&gt;      &amp;lt;a href=&#34;{fn:string-join((&#34;javascript:litePopUp(&amp;apos;&#34;, let $body := fn:doc($parms[1])/xq:xqdoc/xq:functions/xq:function[xq:name = $parms[2]]   <br/&gt;                                                   return      <br/&gt;                                                   display:print-preserve-xqdoc-lite(xs:string($body/*:body[@xml:space])),&#34;&amp;apos;)&#34;),&#34;&#34;)}&#34;&amp;gt;<br/&gt;         view code<br/&gt;      &amp;lt;/a&amp;gt;<br/&gt;    else if ($local = fn:true()) then<br/&gt;%09  if (fn:count($parms) &amp;gt; 1) then<br/&gt;        &amp;lt;a href=&#34;{fn:concat(&#34;javascript:popUp(&amp;apos;xqdoc-file-&#34;, xs:string(fn:index-of(display:get-module-uris(), $parms[1])), &#34;-&#34;, $parms[2], &#34;.html&amp;apos;)&#34;)}&#34;&amp;gt;<br/&gt;          view code<br/&gt;        &amp;lt;/a&amp;gt;<br/&gt;      else<br/&gt;        &amp;lt;a href=&#34;{fn:concat(&#34;javascript:popUp(&amp;apos;xqdoc-file-&#34;, xs:string(fn:index-of(display:get-module-uris(), $parms[1])), &#34;_source.html&amp;apos;)&#34;)}&#34;&amp;gt;<br/&gt;          view code<br/&gt;        &amp;lt;/a&amp;gt;<br/&gt;<br/&gt;    else<br/&gt;      if (fn:count($parms) &amp;gt; 1) then<br/&gt;        &amp;lt;a href=&#34;{fn:concat(&#34;javascript:popUp(&amp;apos;get-code.xqy?module=&#34;, $parms[1], &#34;&amp;#38;&#34;, &#34;function=&#34;, $parms[2], &#34;&amp;apos;)&#34;)}&#34;&amp;gt;<br/&gt;          view code<br/&gt;        &amp;lt;/a&amp;gt;<br/&gt;      else<br/&gt;        &amp;lt;a href=&#34;{fn:concat(&#34;javascript:popUp(&amp;apos;get-code.xqy?module=&#34;, $parms[1], &#34;&amp;apos;)&#34;)}&#34;&amp;gt;<br/&gt;          view code<br/&gt;        &amp;lt;/a&amp;gt;<br/&gt;  else<br/&gt;    ()<br/&gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $type as xs:string ,<br>&nbsp; $local as xs:boolean ,<br>&nbsp; $parms as xs:string* ,<br>&nbsp; $name as xs:string?) as element()?<br><br></li></ul><p>  Construct a link.  Based on the parameters, the link will be built  for the static (off-line viewing mode of xqDoc) or the dynamic viewing  mode of xqDoc.   The parameters will also indicate which link to construct,  supply the appropriate paramters for the link, and assign a name for the link.</p><ul><li>Parameters:</li><ul><li>$type - the type of link to construct. The link can be for the xqDoc home page, the module page for a particular module, or for the XQuery code for a specific function.<br></li><li>$local - indicates whether to build static HTML link for offline viewing or dynamic links for real-time viewing.<br></li><li>$parms - the parameters associated with the link  <i xmlns:xqdoc="http://www.xqdoc.org/1.0">$type</i> <br></li><li>$name - the name to assign for the link<br></li></ul><li>Return:</li><ul><li> HTML </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="7">http://www.w3.org/2005/xpath-functions</td><td>concat</td></tr><tr><td>count</td></tr><tr><td>doc</td></tr><tr><td>exists</td></tr><tr><td>index-of</td></tr><tr><td>string-join</td></tr><tr><td>true</td></tr></table></div><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="2">xqdoc-display.xqy</td><td><a href="#get-module-uris">get-module-uris</a></td></tr><tr><td><a href="#print-preserve-xqdoc-lite">print-preserve-xqdoc-lite</a></td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="14">xqdoc-display.xqy</td><td><a href="#print-comment-see">print-comment-see</a></td></tr><tr><td><a href="#print-external-functions-invoked">print-external-functions-invoked</a></td></tr><tr><td><a href="#print-external-functions-invoked-by">print-external-functions-invoked-by</a></td></tr><tr><td><a href="#print-external-variable-references">print-external-variable-references</a></td></tr><tr><td><a href="#print-external-variables-referenced">print-external-variables-referenced</a></td></tr><tr><td><a href="#print-imports">print-imports</a></td></tr><tr><td><a href="#print-internal-functions-invoked">print-internal-functions-invoked</a></td></tr><tr><td><a href="#print-internal-functions-invoked-by">print-internal-functions-invoked-by</a></td></tr><tr><td><a href="#print-internal-variable-references">print-internal-variable-references</a></td></tr><tr><td><a href="#print-internal-variables-referenced">print-internal-variables-referenced</a></td></tr><tr><td><a href="#print-method-detail">print-method-detail</a></td></tr><tr><td><a href="#print-module">print-module</a></td></tr><tr><td><a href="#print-module-intro">print-module-intro</a></td></tr><tr><td><a href="#print-modules">print-modules</a></td></tr></table></div><div class="methoddetail"><h6>Internal Variables used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Variable Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#$XQDOC_LITE">$XQDOC_LITE</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="decode-uri"><h5><a name="decode-uri"></a>decode-uri</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:decode-uri($uri as xs:string) as xs:string{<br/&gt;  fn:replace($uri, &#34;~2F&#34;, &#34;/&#34;)<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $uri as xs:string) as xs:string<br><br></li></ul><p> Decode the uri.  This routine is needed for some XML databases that have problems with specific characters contained in a document URI. This routine makes the URI more human readable ... by removing the encoding.  Currently, the only character encoded is a "/".  Other characters could easily be added.  However, they would also need to be specified in the xqDoc conversion package (XQDocContext).</p><ul><li>Parameters:</li><ul><li>$uri - the string to be decoded<br></li></ul><li>Return:</li><ul><li> the decoded string </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>replace</td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="11">xqdoc-display.xqy</td><td><a href="#print-external-functions-invoked">print-external-functions-invoked</a></td></tr><tr><td><a href="#print-external-functions-invoked-by">print-external-functions-invoked-by</a></td></tr><tr><td><a href="#print-external-variable-references">print-external-variable-references</a></td></tr><tr><td><a href="#print-external-variables-referenced">print-external-variables-referenced</a></td></tr><tr><td><a href="#print-imports">print-imports</a></td></tr><tr><td><a href="#print-internal-functions-invoked">print-internal-functions-invoked</a></td></tr><tr><td><a href="#print-internal-functions-invoked-by">print-internal-functions-invoked-by</a></td></tr><tr><td><a href="#print-internal-variable-references">print-internal-variable-references</a></td></tr><tr><td><a href="#print-internal-variables-referenced">print-internal-variables-referenced</a></td></tr><tr><td><a href="#print-module">print-module</a></td></tr><tr><td><a href="#print-modules">print-modules</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="get-code-html"><h5><a name="get-code-html"></a>get-code-html</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:get-code-html($module as xs:string, $name as xs:string?, $local as xs:boolean) as element(){<br/&gt;  &amp;lt;html xml:space=&#34;preserve&#34;&amp;gt;<br/&gt;    &amp;lt;head&amp;gt;<br/&gt;      &amp;lt;title&amp;gt;xqDoc -- Code Sample&amp;lt;/title&amp;gt;<br/&gt;    &amp;lt;/head&amp;gt;<br/&gt;    &amp;lt;body xml:space=&#34;preserve&#34;&amp;gt;<br/&gt;    &amp;lt;pre&amp;gt;{<br/&gt;      if (fn:empty($name)) then<br/&gt;        let $body := fn:doc($module)/xq:xqdoc/xq:module<br/&gt;        return    <br/&gt;            if (fn:exists($body/*:body[@xml:space])) then<br/&gt;              display:print-preserve-newlines(xs:string($body/*:body[@xml:space])) <br/&gt;            else<br/&gt;              ()<br/&gt;      else<br/&gt;        let $body := fn:doc($module)/xq:xqdoc/xq:functions/xq:function[xq:name = $name]   <br/&gt;        return      <br/&gt;          display:print-preserve-newlines(xs:string($body/*:body[@xml:space])) <br/&gt;    }<br/&gt;    &amp;lt;/pre&amp;gt;<br/&gt;    &amp;lt;/body&amp;gt;<br/&gt;  &amp;lt;/html&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $module as xs:string ,<br>&nbsp; $name as xs:string? ,<br>&nbsp; $local as xs:boolean) as element()<br><br></li></ul><p>  Construct the HTML that will contain the XQuery code for the function  in the current module (or the entire module).  The code will be   presented via a Javascript popup Window from the module.  The lack  of a $name parameter indicates  to construct the HTML for entire module.  </p><ul><li>Parameters:</li><ul><li>$module - the uri associated with the current module<br></li><li>$name - the name associated with the current function contained in the module<br></li><li>$local - indicates whether to build static HTML link for offline viewing or dynamic links for real-time viewing.<br></li></ul><li>Return:</li><ul><li> HTML ... the XQuery code for the function </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">http://www.w3.org/2005/xpath-functions</td><td>doc</td></tr><tr><td>empty</td></tr><tr><td>exists</td></tr></table></div><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#print-preserve-newlines">print-preserve-newlines</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="get-default-html"><h5><a name="get-default-html"></a>get-default-html</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:get-default-html($local as xs:boolean) as element(){<br/&gt;  &amp;lt;html xml:space=&#34;preserve&#34;&amp;gt;<br/&gt;    &amp;lt;head&amp;gt;<br/&gt;      &amp;lt;title&amp;gt;xqDoc -- Module List&amp;lt;/title&amp;gt;<br/&gt;      { display:get-stylesheet() }<br/&gt;    &amp;lt;/head&amp;gt;<br/&gt;    &amp;lt;body&amp;gt;<br/&gt;    { display:print-intro($local) }<br/&gt;    { display:print-modules($local) }<br/&gt;    &amp;lt;/body&amp;gt;<br/&gt;  &amp;lt;/html&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $local as xs:boolean) as element()<br><br></li></ul><p>  Construct the HTML for the xqDoc home page.  This will include the welcome  text and the list of modules available in xqDoc.</p><ul><li>Parameters:</li><ul><li>$local - indicates whether to build static HTML link for offline viewing or dynamic links for real-time viewing.<br></li></ul><li>Return:</li><ul><li> HTML </li></ul></ul><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">xqdoc-display.xqy</td><td><a href="#get-stylesheet">get-stylesheet</a></td></tr><tr><td><a href="#print-intro">print-intro</a></td></tr><tr><td><a href="#print-modules">print-modules</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="get-function-names"><h5><a name="get-function-names"></a>get-function-names</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:get-function-names($module as xs:string) as xs:string*{<br/&gt;  for $function in fn:doc($module)/xq:xqdoc/xq:functions/xq:function<br/&gt;  return<br/&gt;  if (fn:exists($function/xq:body)) then<br/&gt;    fn:normalize-space(xs:string($function/xq:name))<br/&gt;  else<br/&gt;    ()<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $module as xs:string) as xs:string*<br><br></li></ul><p>  Construct a list of function names defined in the current module.</p><ul><li>Parameters:</li><ul><li>$module - the uri for the current module<br></li></ul><li>Return:</li><ul><li> List of function names defined in the current module  </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">http://www.w3.org/2005/xpath-functions</td><td>doc</td></tr><tr><td>exists</td></tr><tr><td>normalize-space</td></tr></table></div></div>&nbsp;<div class="methoddetail" id="get-module-html"><h5><a name="get-module-html"></a>get-module-html</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:get-module-html($module as xs:string, $local as xs:boolean) as element(){<br/&gt;  &amp;lt;html xml:space=&#34;preserve&#34;&amp;gt;<br/&gt;    &amp;lt;head&amp;gt;<br/&gt;      &amp;lt;title&amp;gt;xqDoc -- Module&amp;lt;/title&amp;gt;<br/&gt;      &amp;lt;script language=&#34;JavaScript&#34;&amp;gt;<br/&gt;      &amp;lt;!--<br/&gt;        function popUp(URL) {<br/&gt;                 day = new Date();<br/&gt;                 id = day.getTime();<br/&gt;                 eval(&#34;page = window.open(URL, &amp;apos;xqdoccode&amp;apos;, &amp;apos;toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1,width=600,height=400,left = 412,top = 334&amp;apos;);&#34;)<br/&gt;                 page.focus();<br/&gt;        }<br/&gt;      --&amp;gt;<br/&gt;      &amp;lt;/script&amp;gt;<br/&gt;      &amp;lt;script language=&#34;JavaScript&#34;&amp;gt;<br/&gt;      &amp;lt;!--<br/&gt;%09    function litePopUp(str) {    <br/&gt;  %09%09  OpenWindow=window.open(&amp;apos;&amp;apos;, &amp;apos;xqdoccode&amp;apos;, &amp;apos;toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1,width=600,height=400,left = 412,top = 334&amp;apos;);<br/&gt;  %09%09  OpenWindow.document.write(&amp;apos;&amp;lt;html xmlspace=&#34;preserve&#34;&amp;gt;&amp;apos;);<br/&gt;  %09%09  OpenWindow.document.write(&amp;apos;&amp;lt;head&amp;gt;&amp;apos;);<br/&gt;  %09%09  OpenWindow.document.write(&amp;apos;&amp;lt;title&amp;gt;xqDoc - Code Sample&amp;lt;/title&amp;gt;&amp;apos;);<br/&gt;  %09%09  OpenWindow.document.write(&amp;apos;&amp;lt;/head&amp;gt;&amp;apos;);  %09%09    %09%09    %09%09  <br/&gt;  %09%09  OpenWindow.document.write(&amp;apos;&amp;lt;body xml:space=&#34;preserve&#34;&amp;gt;&amp;apos;);<br/&gt;  %09%09  OpenWindow.document.write(&amp;apos;&amp;lt;pre&amp;gt;&amp;apos;);<br/&gt; %09%09  OpenWindow.document.write(str);<br/&gt; %09%09  OpenWindow.document.write(&amp;apos;&amp;lt;/pre&amp;gt;&amp;apos;);<br/&gt;  %09%09  OpenWindow.document.write(&amp;apos;&amp;lt;/body&amp;gt;&amp;apos;);<br/&gt;  %09%09  OpenWindow.document.write(&amp;apos;&amp;lt;/html&amp;gt;&amp;apos;);<br/&gt;  %09%09  OpenWindow.document.close();<br/&gt;  %09%09  page.focus();<br/&gt;        }<br/&gt;      --&amp;gt;<br/&gt;      &amp;lt;/script&amp;gt;      <br/&gt;      { display:get-stylesheet() }<br/&gt;    &amp;lt;/head&amp;gt;<br/&gt;    &amp;lt;body&amp;gt;<br/&gt;%09{<br/&gt;%09  if ($display:XQDOC_LITE) then<br/&gt;        ()<br/&gt;      else<br/&gt;        display:print-module-intro($local)<br/&gt;%09}<br/&gt;    { display:print-module-control($module, $local) }<br/&gt;    &amp;lt;/body&amp;gt;<br/&gt;  &amp;lt;/html&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $module as xs:string ,<br>&nbsp; $local as xs:boolean) as element()<br><br></li></ul><p>  Construct the HTML for a xqDoc module page.  </p><ul><li>Parameters:</li><ul><li>$module - the module uri<br></li><li>$local - indicates whether to build static HTML link for offline viewing or dynamic links for real-time viewing.<br></li></ul><li>Return:</li><ul><li> HTML </li></ul></ul><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">xqdoc-display.xqy</td><td><a href="#get-stylesheet">get-stylesheet</a></td></tr><tr><td><a href="#print-module-control">print-module-control</a></td></tr><tr><td><a href="#print-module-intro">print-module-intro</a></td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#xqDoc-main">xqDoc-main</a></td></tr></table></div><div class="methoddetail"><h6>Internal Variables used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Variable Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#$XQDOC_LITE">$XQDOC_LITE</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="get-module-uris"><h5><a name="get-module-uris"></a>get-module-uris</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:get-module-uris() as xs:string*{<br/&gt;  $display:XQDOC_URIS<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( ) as xs:string*<br><br></li></ul><p>  Construct a list of module uris contained in xqDoc.</p><ul><li>Return:</li><ul><li> List of module uris contained in xqDoc </li></ul></ul><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#build-link">build-link</a></td></tr></table></div><div class="methoddetail"><h6>Internal Variables used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Variable Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#$XQDOC_URIS">$XQDOC_URIS</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="get-stylesheet"><h5><a name="get-stylesheet"></a>get-stylesheet</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:get-stylesheet() as element(){<br/&gt;&amp;lt;style&amp;gt;<br/&gt;&amp;lt;!--<br/&gt;body%09%09{<br/&gt;%09%09font: 80% Verdana;<br/&gt;%09%09}<br/&gt;table%09%09{<br/&gt;%09%09font-size: 100%;<br/&gt;%09%09}<br/&gt;h1, h2, h3, h4, h5, h6<br/&gt;%09%09{<br/&gt;%09%09clear: both;<br/&gt;%09%09float: none;<br/&gt;%09%09}<br/&gt;h1%09%09{<br/&gt;%09%09font-size: 100%;<br/&gt;%09%09margin: 0em;<br/&gt;%09%09}<br/&gt;h2%09%09{<br/&gt;%09%09font-size: 180%;<br/&gt;%09%09margin-bottom: -1em;<br/&gt;%09%09margin-top: .3em;<br/&gt;%09%09}<br/&gt;h3%09%09{<br/&gt;%09%09font-size: 150%;<br/&gt;%09%09}%09<br/&gt;h4%09%09{<br/&gt;%09%09font-size: 140%;<br/&gt;%09%09background-color: #ccf;<br/&gt;%09%09border-bottom: 1px solid #99f;<br/&gt;%09%09width: 100%;<br/&gt;%09%09}<br/&gt;h5%09%09{<br/&gt;%09%09margin: 1em 0em 0em 0em;<br/&gt;%09%09font-size: 120%;<br/&gt;%09%09}<br/&gt;h6%09%09{<br/&gt;%09%09margin: 0em 0em 0em 3em;<br/&gt;%09%09font-style: italic;<br/&gt;%09%09font: bold italic;<br/&gt;%09%09font-size: 100%;<br/&gt;%09%09}<br/&gt;#variables, #methods, #methoddetail<br/&gt;%09%09{<br/&gt;%09%09padding-left: 3em;<br/&gt;%09%09margin-bottom: 1.4em;<br/&gt;%09%09clear: both;<br/&gt;%09%09float: none;<br/&gt;%09%09}<br/&gt;#methods ul.method, #variables ul.method<br/&gt;%09%09{<br/&gt;%09%09margin: 1em 0em 0em;<br/&gt;%09%09}<br/&gt;#methoddetail ul.method<br/&gt;%09%09{<br/&gt;%09%09margin: 0em;<br/&gt;%09%09}<br/&gt;div.inexternal<br/&gt;%09%09{<br/&gt;%09%09padding-left: 2em;<br/&gt;%09%09margin-bottom: 1em;<br/&gt;%09%09}<br/&gt;div.methoddetail p<br/&gt;%09%09{<br/&gt;%09%09float: none;<br/&gt;%09%09clear: both;<br/&gt;%09%09padding-left: 2em;<br/&gt;%09%09margin-bottom: 1em;<br/&gt;%09%09}<br/&gt;div.methoddetail{<br/&gt;%09%09padding-bottom: 1em;<br/&gt;%09%09}<br/&gt;div.methoddetail li<br/&gt;%09%09{<br/&gt;%09%09list-style-type: none;<br/&gt;%09%09font-weight: bold;<br/&gt;%09%09}<br/&gt;div.methoddetail li li<br/&gt;%09%09{<br/&gt;%09%09list-style-type: circle;<br/&gt;%09%09font-weight: normal;<br/&gt;%09%09}<br/&gt;div.methoddetail li ul<br/&gt;%09%09{<br/&gt;%09%09padding-bottom: 0.5em;<br/&gt;%09%09font-weight: normal;<br/&gt;%09%09}<br/&gt;table.inexternal{<br/&gt;%09%09clear: both;<br/&gt;%09%09float: none;<br/&gt;%09%09width: 80%;<br/&gt;%09%09margin-left: 3em;<br/&gt;%09%09padding: 0em;<br/&gt;%09%09<br/&gt;%09%09}<br/&gt;table.inexternal th<br/&gt;%09%09{<br/&gt;%09%09background-color:#dedede;<br/&gt;%09%09width: 50%;<br/&gt;%09%09}%09%09%09<br/&gt;td%09%09{<br/&gt;%09%09vertical-align: top;<br/&gt;%09%09}<br/&gt;div.description {<br/&gt;%09%09margin-top: .5em;<br/&gt;%09%09font-weight: normal;<br/&gt;%09%09padding-left: 1em;<br/&gt;%09%09}<br/&gt;ul.method%09{<br/&gt;%09%09clear: both;<br/&gt;%09%09float: none;<br/&gt;%09%09width: 90%;<br/&gt;%09%09list-style-type: none;<br/&gt;%09%09border-top: 1px solid #ccc;<br/&gt;%09%09}<br/&gt;ul.method li.left<br/&gt;%09%09{<br/&gt;%09%09float: left;<br/&gt;%09%09clear: none;<br/&gt;%09%09width: 40%;<br/&gt;%09%09font-weight: bold;<br/&gt;%09%09margin-bottom: 2em;<br/&gt;%09%09}<br/&gt;ul.method li.right<br/&gt;%09%09{<br/&gt;%09%09position: relative;<br/&gt;            top: 0em;<br/&gt;%09%09float: left;<br/&gt;            width: 55%;<br/&gt;%09%09margin-bottom: 2em;<br/&gt;%09%09padding-left: 2em;<br/&gt;%09%09}<br/&gt;div.home %09{<br/&gt;%09%09width: 60%;<br/&gt;%09%09float: left;<br/&gt;%09%09margin-right: 1%;<br/&gt;%09%09border: 1px<br/&gt;%09%09}<br/&gt;div.home h4%09{<br/&gt;%09%09font-size: 120%;<br/&gt;%09%09background-color: #fff;<br/&gt;%09%09border-bottom: 1px solid #99f;<br/&gt;%09%09width: 100%;<br/&gt;%09%09margin-bottom: -1em;<br/&gt;%09%09}<br/&gt;div.overview p {<br/&gt;               width: 60%;<br/&gt;               }<br/&gt;     <br/&gt; --&amp;gt;<br/&gt;&amp;lt;/style&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( ) as element()<br><br></li></ul><p>  Get the xqDoc presentation stylesheet.  This is embedded into  the returned XHTML for all of the presentation pages.  It is  embedded into pages (instead of referencing a link) to keep   things simple for the off-line viewing mode.</p><ul><li>Return:</li><ul><li> the stylesheet </li></ul></ul><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="2">xqdoc-display.xqy</td><td><a href="#get-default-html">get-default-html</a></td></tr><tr><td><a href="#get-module-html">get-module-html</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="module-uri"><h5><a name="module-uri"></a>module-uri</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:module-uri($e as element()) as xs:string{<br/&gt;  xs:string($e/ancestor::xq:xqdoc/xq:module/xq:uri)<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $e as element()) as xs:string<br><br></li></ul><p> Find the module uri for the associated element.  This routine is needed  since we can't rely soley on base-uri().  Instead, the xqDoc XML URI is contained in the XML of the document (the xqDoc module section).</p><ul><li>Parameters:</li><ul><li>$e - the element (i.e. function or variable) that we want to find the module uri<br></li></ul><li>Return:</li><ul><li> the module URI associated with the element </li></ul></ul><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="8">xqdoc-display.xqy</td><td><a href="#print-external-functions-invoked">print-external-functions-invoked</a></td></tr><tr><td><a href="#print-external-functions-invoked-by">print-external-functions-invoked-by</a></td></tr><tr><td><a href="#print-external-variable-references">print-external-variable-references</a></td></tr><tr><td><a href="#print-external-variables-referenced">print-external-variables-referenced</a></td></tr><tr><td><a href="#print-internal-functions-invoked">print-internal-functions-invoked</a></td></tr><tr><td><a href="#print-internal-functions-invoked-by">print-internal-functions-invoked-by</a></td></tr><tr><td><a href="#print-internal-variable-references">print-internal-variable-references</a></td></tr><tr><td><a href="#print-internal-variables-referenced">print-internal-variables-referenced</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-comment"><h5><a name="print-comment"></a>print-comment</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-comment($comment as element()*, $name as xs:string?, $local as xs:boolean) as element()*{<br/&gt;  if (fn:exists($comment)) then<br/&gt;     for $i in $comment<br/&gt;       return           <br/&gt;             if (fn:not(fn:exists($name))) then <br/&gt;               &amp;lt;p&amp;gt;{$i/node()}&amp;lt;/p&amp;gt;     <br/&gt;             else if ($name = &#34;See:&#34;) then<br/&gt;               &amp;lt;li&amp;gt;&amp;lt;strong&amp;gt;{fn:concat($name, &#34;&amp;#160;&#34;)}&amp;lt;/strong&amp;gt;{display:print-comment-see($i, $local)}&amp;lt;/li&amp;gt;<br/&gt;             else<br/&gt;               &amp;lt;li&amp;gt;&amp;lt;strong&amp;gt;{fn:concat($name, &#34;&amp;#160;&#34;)}&amp;lt;/strong&amp;gt;{$i/node()}&amp;lt;/li&amp;gt;<br/&gt;  else<br/&gt;    ()<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $comment as element()* ,<br>&nbsp; $name as xs:string? ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><p>  Construct the xqDoc HTML for the specified xqDoc comment.  The following  xqDoc comment values are supported.  <ul xmlns:xqdoc="http://www.xqdoc.org/1.0">  <li>author</li>  <li>version</li>  <li>param</li>  <li>return</li>  <li>error</li>  <li>deprecated</li>  <li>see</li>  <li>since</li>  <li><i>empty</i> which indicates a <i>description</i></li>  </ul></p><ul><li>Parameters:</li><ul><li>$comment - the xqDoc comment element associated with a function<br></li><li>$name - the xqDoc comment name to process (i.e. author, version, etc.)<br></li><li>$local - indicates whether to build static HTML link for offline viewing or dynamic links for real-time viewing.<br></li></ul><li>Return:</li><ul><li> HTML </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">http://www.w3.org/2005/xpath-functions</td><td>concat</td></tr><tr><td>exists</td></tr><tr><td>not</td></tr></table></div><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#print-comment-see">print-comment-see</a></td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">xqdoc-display.xqy</td><td><a href="#print-imports">print-imports</a></td></tr><tr><td><a href="#print-module">print-module</a></td></tr><tr><td><a href="#print-variables">print-variables</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-comment-param"><h5><a name="print-comment-param"></a>print-comment-param</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-comment-param($entry as element()) as item()*{<br/&gt;    let $tmp := xs:string(($entry/node())[1])<br/&gt;    let $bef :=  fn:substring-before(fn:normalize-space($tmp), &#34; &#34;)<br/&gt;    let $aft :=  fn:substring-after(fn:normalize-space($tmp), &#34; &#34;)<br/&gt;    return<br/&gt;       (if (fn:string-length($bef) &amp;gt; 0) then<br/&gt;%09%09fn:concat($bef, &#34; - &#34;, $aft)<br/&gt;%09  else<br/&gt;%09%09$tmp,<br/&gt;%09  (for $x at $y in $entry/node()<br/&gt;         return<br/&gt;           if ($y &amp;gt; 1) then<br/&gt;               (&#34; &#34;, $x, &#34; &#34;)<br/&gt;           else<br/&gt;               ()),<br/&gt;         &amp;lt;br/&amp;gt;)<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $entry as element()) as item()*<br><br></li></ul><p>  Construct the xqDoc HTML for the specified xqDoc <i xmlns:xqdoc="http://www.xqdoc.org/1.0">param</i> comment element.  </p><ul><li>Parameters:</li><ul><li>$entry - the xqDoc  <i xmlns:xqdoc="http://www.xqdoc.org/1.0">param</i>    comment element associated with a function <br></li></ul><li>Return:</li><ul><li> HTML </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="5">http://www.w3.org/2005/xpath-functions</td><td>concat</td></tr><tr><td>normalize-space</td></tr><tr><td>string-length</td></tr><tr><td>substring-after</td></tr><tr><td>substring-before</td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#print-detail-comment">print-detail-comment</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-comment-see"><h5><a name="print-comment-see"></a>print-comment-see</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-comment-see($entry as element(), $local as xs:boolean) as item()*{<br/&gt;  let $tmp := fn:normalize-space(xs:string($entry))<br/&gt;  let $tokens := fn:tokenize($tmp, &#34;;&#34;)<br/&gt;  return<br/&gt;<br/&gt;  if (fn:count($tokens) = 1) then<br/&gt;<br/&gt;    if (fn:not(fn:contains($tokens,&#34;#&#34;)) and fn:not($display:XQDOC_LITE) and fn:exists(fn:doc($tokens))) then<br/&gt;<br/&gt;        display:build-link(&#34;get-module&#34;,<br/&gt;                           $local,<br/&gt;                           $tokens,<br/&gt;                           $tmp)<br/&gt;<br/&gt;    else if (fn:starts-with($tokens, &#34;http&#34;)) then<br/&gt;<br/&gt;        &amp;lt;a href=&#34;{$tokens}&#34;&amp;gt;{$tokens}&amp;lt;/a&amp;gt;<br/&gt;<br/&gt;    else<br/&gt;<br/&gt;        $entry/node()<br/&gt;<br/&gt;  else if (fn:count($tokens) = 2) then<br/&gt;<br/&gt;    if (fn:not(fn:contains($tokens[1],&#34;#&#34;)) and fn:not($display:XQDOC_LITE) and fn:exists(fn:doc($tokens[1])//xq:functions/xq:function[xq:name = fn:normalize-space($tokens[2])])) then<br/&gt;<br/&gt;        display:build-link(&#34;get-module&#34;,<br/&gt;                           $local,<br/&gt;                           $tokens,<br/&gt;                           $tmp)<br/&gt;<br/&gt;    else<br/&gt;<br/&gt;      $entry/node()<br/&gt;<br/&gt;  else if (fn:count($tokens) = 3) then<br/&gt;<br/&gt;    if (fn:string-length($tokens[2]) = 0 and fn:not(fn:contains($tokens[1],&#34;#&#34;)) and fn:not($display:XQDOC_LITE) and fn:exists(fn:doc($tokens[1]))) then<br/&gt;<br/&gt;        display:build-link(&#34;get-module&#34;,<br/&gt;                           $local,<br/&gt;                           $tokens,<br/&gt;                           $tokens[3])<br/&gt;<br/&gt;    else if (fn:string-length($tokens[2]) = 0 and fn:starts-with($tokens[1], &#34;http&#34;)) then<br/&gt;<br/&gt;        &amp;lt;a href=&#34;{$tokens[1]}&#34;&amp;gt;{$tokens[3]}&amp;lt;/a&amp;gt;<br/&gt;<br/&gt;    else if (fn:string-length($tokens[2]) &amp;gt; 0 and fn:not(fn:contains($tokens[1],&#34;#&#34;)) and fn:not($display:XQDOC_LITE) and fn:exists(fn:doc($tokens[1])//xq:functions/xq:function[xq:name = fn:normalize-space($tokens[2])])) then<br/&gt;<br/&gt;        display:build-link(&#34;get-module&#34;,<br/&gt;                           $local,<br/&gt;                           $tokens,<br/&gt;                           $tokens[3])<br/&gt;<br/&gt;    else<br/&gt;<br/&gt;      $entry/node()<br/&gt;<br/&gt;  else <br/&gt;<br/&gt;    $entry/node()<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $entry as element() ,<br>&nbsp; $local as xs:boolean) as item()*<br><br></li></ul><p>  Construct the xqDoc HTML for the specified xqDoc <i xmlns:xqdoc="http://www.xqdoc.org/1.0">see</i> comment element.   If the comment is a URI that exists for a module contained within  xqDoc, build a link to this module (and optionally method or variable  name.  If the comment is a 'http://' URL, then build a link to the URL.  If the  comment is simply text, return the text.  With version 1.1, it is now also  possible to specify the visible display name for the link.  This is accomplished  by specifying an option second semi-colon followed by the link name.  So, the  format for the parameter would be as follows:  <p xmlns:xqdoc="http://www.xqdoc.org/1.0"></p>    a mandatory uri (or text) ';' an optional variable or method name ';' an optional link name</p><ul><li>Parameters:</li><ul><li>$entry - the xqDoc param comment element associated with a function<br></li><li>$local - indicates whether to build static HTML link for offline viewing or dynamic links for real-time viewing.<br></li></ul><li>Return:</li><ul><li> HTML </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="9">http://www.w3.org/2005/xpath-functions</td><td>contains</td></tr><tr><td>count</td></tr><tr><td>doc</td></tr><tr><td>exists</td></tr><tr><td>normalize-space</td></tr><tr><td>not</td></tr><tr><td>starts-with</td></tr><tr><td>string-length</td></tr><tr><td>tokenize</td></tr></table></div><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#build-link">build-link</a></td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="2">xqdoc-display.xqy</td><td><a href="#print-comment">print-comment</a></td></tr><tr><td><a href="#print-detail-comment">print-detail-comment</a></td></tr></table></div><div class="methoddetail"><h6>Internal Variables used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Variable Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#$XQDOC_LITE">$XQDOC_LITE</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-detail-comment"><h5><a name="print-detail-comment"></a>print-detail-comment</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-detail-comment($comment as element()*, $name as xs:string?, $local as xs:boolean) as element()*{<br/&gt;  if (fn:exists($comment)) then<br/&gt;    if (fn:exists($name)) then       <br/&gt;      (&amp;lt;li&amp;gt;{$name}&amp;lt;/li&amp;gt;,<br/&gt;       &amp;lt;ul&amp;gt;<br/&gt;          {<br/&gt;            for $i in $comment<br/&gt;            return<br/&gt;              if ($name = &#34;Parameters:&#34;) then<br/&gt;                &amp;lt;li&amp;gt;{display:print-comment-param($i)}&amp;lt;/li&amp;gt;             <br/&gt;              else if ($name = &#34;See:&#34;) then<br/&gt;                &amp;lt;li&amp;gt;{display:print-comment-see($i, $local)}&amp;lt;/li&amp;gt;<br/&gt;              else<br/&gt;                &amp;lt;li&amp;gt;{$i/node()}&amp;lt;/li&amp;gt;<br/&gt;          }<br/&gt;      &amp;lt;/ul&amp;gt;) <br/&gt;    else<br/&gt;      &amp;lt;p&amp;gt;{$comment/node()}&amp;lt;/p&amp;gt; <br/&gt;  else<br/&gt;    ()  <br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $comment as element()* ,<br>&nbsp; $name as xs:string? ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><p>  Construct the <i xmlns:xqdoc="http://www.xqdoc.org/1.0">detailed</i> xqDoc HTML for the specified xqDoc comment.    Detailed essentially implies the xqDoc comments for the method detail. The following  xqDoc comment values are supported.  <ul xmlns:xqdoc="http://www.xqdoc.org/1.0">  <li>author</li>  <li>version</li>  <li>param</li>  <li>return</li>  <li>error</li>  <li>deprecated</li>  <li>see</li>  <li>since</li>  <li><i>empty</i> which indicates a <i>description</i></li>  </ul></p><ul><li>Parameters:</li><ul><li>$comment - the xqDoc comment element associated with a function<br></li><li>$name - the xqDoc comment name to process (i.e. author, version, etc.)<br></li><li>$local - indicates whether to build static HTML link for offline viewing or dynamic links for real-time viewing.<br></li></ul><li>Return:</li><ul><li> HTML </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>exists</td></tr></table></div><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="2">xqdoc-display.xqy</td><td><a href="#print-comment-param">print-comment-param</a></td></tr><tr><td><a href="#print-comment-see">print-comment-see</a></td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#print-method-detail">print-method-detail</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-external-functions-invoked"><h5><a name="print-external-functions-invoked"></a>print-external-functions-invoked</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-external-functions-invoked($function as element(), $local as xs:boolean) as element()*{<br/&gt;  if (fn:exists($function/xq:invoked[xq:uri != display:module-uri($function)])) then<br/&gt;     &amp;lt;div class=&#34;methoddetail&#34;&amp;gt;<br/&gt;     &amp;lt;h6&amp;gt;External Functions that are used by this Function&amp;lt;/h6&amp;gt;<br/&gt;     &amp;lt;table class=&#34;inexternal&#34;&amp;gt;<br/&gt;       &amp;lt;tr&amp;gt;<br/&gt;        &amp;lt;th align=&#34;left&#34;&amp;gt;Module URI&amp;lt;/th&amp;gt;<br/&gt;        &amp;lt;th align=&#34;left&#34;&amp;gt;Function Name&amp;lt;/th&amp;gt;<br/&gt;       &amp;lt;/tr&amp;gt;<br/&gt;       {<br/&gt;       let $uris := for $x in fn:distinct-values($function/xq:invoked/xq:uri)<br/&gt;                    where $x != display:module-uri($function)<br/&gt;                    order by xs:string($x)<br/&gt;                    return xs:string($x)<br/&gt;       for $uri in $uris<br/&gt;       let $names := for $y in $function/xq:invoked[xq:uri=$uri]<br/&gt;                     order by xs:string($y/xq:name)<br/&gt;                     return xs:string($y/xq:name)<br/&gt;       for $name at $i in $names<br/&gt;       return<br/&gt;         if ($i = 1) then<br/&gt;%09%09(&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;{&#34;&amp;#160;&#34;}&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;{&#34;&amp;#160;&#34;}&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;,<br/&gt;            &amp;lt;tr&amp;gt;<br/&gt;             &amp;lt;td rowspan=&#34;{fn:count($names)}&#34;&amp;gt;{display:decode-uri($uri)}&amp;lt;/td&amp;gt;<br/&gt;             {<br/&gt;               if ($display:XQDOC_LITE) then<br/&gt;                 &amp;lt;td&amp;gt;{$name}&amp;lt;/td&amp;gt;<br/&gt;               else if (fn:exists(fn:doc($uri)/xq:xqdoc/xq:functions/xq:function[xq:name = $name])) then<br/&gt;                 &amp;lt;td&amp;gt;<br/&gt;                     {<br/&gt;                       display:build-link(&#34;get-module&#34;,<br/&gt;                                          $local, <br/&gt;                                          ($uri, $name),<br/&gt;                                          $name)<br/&gt;                     }<br/&gt;                 &amp;lt;/td&amp;gt;<br/&gt;               else<br/&gt;                 &amp;lt;td&amp;gt;{$name}&amp;lt;/td&amp;gt;<br/&gt;             }<br/&gt;           &amp;lt;/tr&amp;gt;)<br/&gt;         else if ($display:XQDOC_LITE) then<br/&gt;           &amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;{$name}&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;<br/&gt;%09     else<br/&gt;           &amp;lt;tr&amp;gt;<br/&gt;             {<br/&gt;               if (fn:exists(fn:doc($uri)/xq:xqdoc/xq:functions/xq:function[xq:name = $name])) then<br/&gt;                 &amp;lt;td&amp;gt;<br/&gt;                     {<br/&gt;                       display:build-link(&#34;get-module&#34;,<br/&gt;                                          $local, <br/&gt;                                          ($uri, $name),<br/&gt;                                          $name)<br/&gt;                     }                   <br/&gt;                 &amp;lt;/td&amp;gt;<br/&gt;               else<br/&gt;                 &amp;lt;td&amp;gt;{$name}&amp;lt;/td&amp;gt;<br/&gt;             }<br/&gt;           &amp;lt;/tr&amp;gt;<br/&gt;      }<br/&gt;    &amp;lt;/table&amp;gt;<br/&gt;   &amp;lt;/div&amp;gt;<br/&gt;<br/&gt;  else<br/&gt;    ()<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $function as element() ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><p>  Construct the information to identify those functions (contained in  other modules) that are <i xmlns:xqdoc="http://www.xqdoc.org/1.0">used by</i> the current function.  If that   module exists in xqDoc, construct a link to the module and function.  If that module does not exist in xqDoc, simply identify the   module and function name.</p><ul><li>Parameters:</li><ul><li>$function - the current function<br></li><li>$local - indicates whether to build static HTML link for offline viewing or dynamic links for real-time viewing.<br></li></ul><li>Return:</li><ul><li> HTML </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="4">http://www.w3.org/2005/xpath-functions</td><td>count</td></tr><tr><td>distinct-values</td></tr><tr><td>doc</td></tr><tr><td>exists</td></tr></table></div><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">xqdoc-display.xqy</td><td><a href="#build-link">build-link</a></td></tr><tr><td><a href="#decode-uri">decode-uri</a></td></tr><tr><td><a href="#module-uri">module-uri</a></td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#print-method-detail">print-method-detail</a></td></tr></table></div><div class="methoddetail"><h6>Internal Variables used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Variable Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#$XQDOC_LITE">$XQDOC_LITE</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-external-functions-invoked-by"><h5><a name="print-external-functions-invoked-by"></a>print-external-functions-invoked-by</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-external-functions-invoked-by($function as element(), $local as xs:boolean) as element()*{<br/&gt;  if (fn:exists(fn:collection($display:XQDOC_COLLECTION)/xq:xqdoc/xq:functions/xq:function/xq:invoked[display:module-uri(.) != display:module-uri($function) and xq:uri=display:module-uri($function) and xq:name=xs:string($function/xq:name)])) then<br/&gt;    &amp;lt;div class=&#34;methoddetail&#34;&amp;gt;<br/&gt;     &amp;lt;h6&amp;gt;External Functions that invoke this Function&amp;lt;/h6&amp;gt;<br/&gt;     &amp;lt;table class=&#34;inexternal&#34;&amp;gt;<br/&gt;       &amp;lt;tr&amp;gt;<br/&gt;        &amp;lt;th align=&#34;left&#34;&amp;gt;Module URI&amp;lt;/th&amp;gt;<br/&gt;        &amp;lt;th align=&#34;left&#34;&amp;gt;Function Name&amp;lt;/th&amp;gt;<br/&gt;       &amp;lt;/tr&amp;gt;<br/&gt;       {<br/&gt;        let $list := for $x in fn:collection($display:XQDOC_COLLECTION)/xq:xqdoc/xq:functions/xq:function/xq:invoked[xq:uri=display:module-uri($function) and xq:name=xs:string($function/xq:name)]<br/&gt;                     return $x<br/&gt;        let $uris := fn:distinct-values(for $y in $list<br/&gt;                                     where display:module-uri($y) != display:module-uri($function)<br/&gt;                                     order by display:module-uri($y)<br/&gt;                                     return<br/&gt;                                       display:module-uri($y))<br/&gt;        for $uri in $uris<br/&gt;        let $entries := for $entry in $list<br/&gt;                        where display:module-uri($entry)=$uri<br/&gt;                        order by $entry/../xq:name<br/&gt;                        return $entry<br/&gt;        for $entry at $i in $entries<br/&gt;        return <br/&gt;           if ($i = 1) then<br/&gt;%09%09(&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;{&#34;&amp;#160;&#34;}&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;{&#34;&amp;#160;&#34;}&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;,<br/&gt;            &amp;lt;tr&amp;gt;<br/&gt;             &amp;lt;td rowspan=&#34;{fn:count($entries)}&#34;&amp;gt;{display:decode-uri($uri)}&amp;lt;/td&amp;gt;<br/&gt;             {<br/&gt;               if (fn:exists(fn:doc($uri)/xq:xqdoc/xq:functions/xq:function[xq:name = $entry/../xq:name])) then<br/&gt;                 &amp;lt;td&amp;gt;<br/&gt;                     {<br/&gt;                       display:build-link(&#34;get-module&#34;,<br/&gt;                                          $local, <br/&gt;                                          ($uri, xs:string($entry/../xq:name)),<br/&gt;                                          xs:string($entry/../xq:name))<br/&gt;                     }<br/&gt;                 &amp;lt;/td&amp;gt;<br/&gt;               else<br/&gt;                 &amp;lt;td&amp;gt;{xs:string($entry/../xq:name)}&amp;lt;/td&amp;gt;<br/&gt;             }<br/&gt;            &amp;lt;/tr&amp;gt;)<br/&gt;           else<br/&gt;            &amp;lt;tr&amp;gt;<br/&gt;             {<br/&gt;               if (fn:exists(fn:doc($uri)/xq:xqdoc/xq:functions/xq:function[xq:name = $entry/../xq:name])) then<br/&gt;                 &amp;lt;td&amp;gt;<br/&gt;                     {<br/&gt;                       display:build-link(&#34;get-module&#34;,<br/&gt;                                          $local, <br/&gt;                                          ($uri, xs:string($entry/../xq:name)),<br/&gt;                                          xs:string($entry/../xq:name))<br/&gt;                     }<br/&gt;                 &amp;lt;/td&amp;gt;<br/&gt;               else<br/&gt;                 &amp;lt;td&amp;gt;{xs:string($entry/../xq:name)}&amp;lt;/td&amp;gt;<br/&gt;             }<br/&gt;            &amp;lt;/tr&amp;gt;<br/&gt;        }%09  <br/&gt;        &amp;lt;/table&amp;gt;<br/&gt;       &amp;lt;/div&amp;gt;<br/&gt;   else<br/&gt;    ()<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $function as element() ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><p>  Construct the information to identify those functions (contained in  other modules) that <i xmlns:xqdoc="http://www.xqdoc.org/1.0">use</i> the current function.  If that   module exists in xqDoc, construct a link to the module and function.  If that module does not exist in xqDoc, simply identify the   module and function name.</p><ul><li>Parameters:</li><ul><li>$function - the current function<br></li><li>$local - indicates whether to build static HTML link for offline viewing or dynamic links for real-time viewing.<br></li></ul><li>Return:</li><ul><li> HTML </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="5">http://www.w3.org/2005/xpath-functions</td><td>collection</td></tr><tr><td>count</td></tr><tr><td>distinct-values</td></tr><tr><td>doc</td></tr><tr><td>exists</td></tr></table></div><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">xqdoc-display.xqy</td><td><a href="#build-link">build-link</a></td></tr><tr><td><a href="#decode-uri">decode-uri</a></td></tr><tr><td><a href="#module-uri">module-uri</a></td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#print-method-detail">print-method-detail</a></td></tr></table></div><div class="methoddetail"><h6>Internal Variables used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Variable Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#$XQDOC_COLLECTION">$XQDOC_COLLECTION</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-external-variable-references"><h5><a name="print-external-variable-references"></a>print-external-variable-references</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-external-variable-references($variable as element(), $local as xs:boolean) as element()*{<br/&gt;  if (fn:exists(fn:collection($display:XQDOC_COLLECTION)/xq:xqdoc/xq:functions/xq:function/xq:ref-variable[display:module-uri(.) != display:module-uri($variable) and xq:uri=display:module-uri($variable) and xq:name=xs:string($variable/xq:uri)])) then<br/&gt;    &amp;lt;div class=&#34;methoddetail&#34;&amp;gt;<br/&gt;     &amp;lt;h6&amp;gt;External Functions that reference this Variable&amp;lt;/h6&amp;gt;<br/&gt;     &amp;lt;table class=&#34;inexternal&#34;&amp;gt;<br/&gt;       &amp;lt;tr&amp;gt;<br/&gt;        &amp;lt;th align=&#34;left&#34;&amp;gt;Module URI&amp;lt;/th&amp;gt;<br/&gt;        &amp;lt;th align=&#34;left&#34;&amp;gt;Function Name&amp;lt;/th&amp;gt;<br/&gt;       &amp;lt;/tr&amp;gt;<br/&gt;       {<br/&gt;        let $list := for $x in fn:collection($display:XQDOC_COLLECTION)/xq:xqdoc/xq:functions/xq:function/xq:ref-variable[xq:uri=display:module-uri($variable) and xq:name=xs:string($variable/xq:uri)]<br/&gt;                     return $x<br/&gt;        let $uris := fn:distinct-values(for $y in $list<br/&gt;                                     where display:module-uri($y) != display:module-uri($variable)<br/&gt;                                     order by display:module-uri($y)<br/&gt;                                     return<br/&gt;                                       display:module-uri($y))<br/&gt;        for $uri in $uris<br/&gt;        let $entries := for $entry in $list<br/&gt;                        where display:module-uri($entry)=$uri<br/&gt;                        order by $entry/../xq:name<br/&gt;                        return $entry<br/&gt;        for $entry at $i in $entries<br/&gt;        return <br/&gt;           if ($i = 1) then<br/&gt;%09%09(&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;{&#34;&amp;#160;&#34;}&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;{&#34;&amp;#160;&#34;}&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;,<br/&gt;            &amp;lt;tr&amp;gt;<br/&gt;             &amp;lt;td rowspan=&#34;{fn:count($entries)}&#34;&amp;gt;{display:decode-uri($uri)}&amp;lt;/td&amp;gt;<br/&gt;             {<br/&gt;               if (fn:exists(fn:doc($uri)/xq:xqdoc/xq:functions/xq:function[xq:name = $entry/../xq:name])) then<br/&gt;                 &amp;lt;td&amp;gt;<br/&gt;                     {<br/&gt;                       display:build-link(&#34;get-module&#34;,<br/&gt;                                          $local, <br/&gt;                                          ($uri, xs:string($entry/../xq:name)),<br/&gt;                                          xs:string($entry/../xq:name))<br/&gt;                     }<br/&gt;                 &amp;lt;/td&amp;gt;<br/&gt;               else<br/&gt;                 &amp;lt;td&amp;gt;{xs:string($entry/../xq:name)}&amp;lt;/td&amp;gt;<br/&gt;             }<br/&gt;            &amp;lt;/tr&amp;gt;)<br/&gt;           else<br/&gt;            &amp;lt;tr&amp;gt;<br/&gt;             {<br/&gt;               if (fn:exists(fn:doc($uri)/xq:xqdoc/xq:functions/xq:function[xq:name = $entry/../xq:name])) then<br/&gt;                 &amp;lt;td&amp;gt;<br/&gt;                     {<br/&gt;                       display:build-link(&#34;get-module&#34;,<br/&gt;                                          $local, <br/&gt;                                          ($uri, xs:string($entry/../xq:name)),<br/&gt;                                          xs:string($entry/../xq:name))<br/&gt;                     }<br/&gt;                 &amp;lt;/td&amp;gt;<br/&gt;               else<br/&gt;                 &amp;lt;td&amp;gt;{xs:string($entry/../xq:name)}&amp;lt;/td&amp;gt;<br/&gt;             }<br/&gt;            &amp;lt;/tr&amp;gt;<br/&gt;        }<br/&gt;        &amp;lt;/table&amp;gt;<br/&gt;       &amp;lt;/div&amp;gt;<br/&gt;   else<br/&gt;    ()<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $variable as element() ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><p>  Construct the information to identify those functions (defined in other modules  from the current variable) that <i xmlns:xqdoc="http://www.xqdoc.org/1.0">used</i> the current variable.  If that   module exists in xqDoc, construct a link to the module and function.  If that module does not exist in xqDoc, simply identify the   module and function name.</p><ul><li>Parameters:</li><ul><li>$variable - the current variable<br></li><li>$local - indicates whether to build static HTML link for offline viewing or dynamic links for real-time viewing.<br></li></ul><li>Return:</li><ul><li> HTML </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="5">http://www.w3.org/2005/xpath-functions</td><td>collection</td></tr><tr><td>count</td></tr><tr><td>distinct-values</td></tr><tr><td>doc</td></tr><tr><td>exists</td></tr></table></div><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">xqdoc-display.xqy</td><td><a href="#build-link">build-link</a></td></tr><tr><td><a href="#decode-uri">decode-uri</a></td></tr><tr><td><a href="#module-uri">module-uri</a></td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#print-variables">print-variables</a></td></tr></table></div><div class="methoddetail"><h6>Internal Variables used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Variable Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#$XQDOC_COLLECTION">$XQDOC_COLLECTION</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-external-variables-referenced"><h5><a name="print-external-variables-referenced"></a>print-external-variables-referenced</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-external-variables-referenced($variable as element(), $local as xs:boolean) as element()*{<br/&gt;  if (fn:exists($variable/xq:ref-variable[xq:uri != display:module-uri($variable)])) then<br/&gt;    &amp;lt;div class=&#34;methoddetail&#34;&amp;gt;<br/&gt;     &amp;lt;h6&amp;gt;External Variables used by this Function&amp;lt;/h6&amp;gt;<br/&gt;     &amp;lt;table class=&#34;inexternal&#34;&amp;gt;<br/&gt;       &amp;lt;tr&amp;gt;<br/&gt;        &amp;lt;th align=&#34;left&#34;&amp;gt;Module URI&amp;lt;/th&amp;gt;<br/&gt;        &amp;lt;th align=&#34;left&#34;&amp;gt;Variable Name&amp;lt;/th&amp;gt;<br/&gt;       &amp;lt;/tr&amp;gt;<br/&gt;      {<br/&gt;       let $uris := for $x in fn:distinct-values($variable/xq:ref-variable/xq:uri)<br/&gt;                    where $x != display:module-uri($variable)<br/&gt;                    order by xs:string($x)<br/&gt;                    return xs:string($x)<br/&gt;       for $uri in $uris<br/&gt;       let $names := for $y in $variable/xq:ref-variable[xq:uri=$uri]<br/&gt;                     order by xs:string($y/xq:name)<br/&gt;                     return xs:string($y/xq:name)<br/&gt;       for $name at $i in $names<br/&gt;       return<br/&gt;         if ($i = 1) then<br/&gt;%09%09(&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;{&#34;&amp;#160;&#34;}&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;{&#34;&amp;#160;&#34;}&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;,<br/&gt;            &amp;lt;tr&amp;gt;<br/&gt;             &amp;lt;td rowspan=&#34;{fn:count($names)}&#34;&amp;gt;{display:decode-uri($uri)}&amp;lt;/td&amp;gt;<br/&gt;             {<br/&gt;%09%09%09   if ($display:XQDOC_LITE) then<br/&gt;                 &amp;lt;td&amp;gt;{fn:concat(&#34;$&#34;,$name)}&amp;lt;/td&amp;gt;<br/&gt;               else if (fn:exists(fn:doc($uri)/xq:xqdoc/xq:variables/xq:variable[xq:uri = $name])) then<br/&gt;                 &amp;lt;td&amp;gt;<br/&gt;                     {<br/&gt;                       display:build-link(&#34;get-module&#34;,<br/&gt;                                          $local, <br/&gt;                                          ($uri, fn:concat(&#34;$&#34;,$name)),<br/&gt;                                          fn:concat(&#34;$&#34;,$name))<br/&gt;                     }<br/&gt;                 &amp;lt;/td&amp;gt;<br/&gt;               else<br/&gt;                 &amp;lt;td&amp;gt;{fn:concat(&#34;$&#34;,$name)}&amp;lt;/td&amp;gt;<br/&gt;             }<br/&gt;           &amp;lt;/tr&amp;gt;)<br/&gt;         else if ($display:XQDOC_LITE) then<br/&gt;%09%09   &amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;{fn:concat(&#34;$&#34;,$name)}&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;<br/&gt;         else<br/&gt;           &amp;lt;tr&amp;gt;<br/&gt;             {<br/&gt;               if (fn:exists(fn:doc($uri)/xq:xqdoc/xq:variables/xq:variable[xq:uri = $name])) then<br/&gt;                 &amp;lt;td&amp;gt;<br/&gt;                     {<br/&gt;                       display:build-link(&#34;get-module&#34;,<br/&gt;                                          $local, <br/&gt;                                          ($uri, fn:concat(&#34;$&#34;,$name)),<br/&gt;                                          fn:concat(&#34;$&#34;,$name))<br/&gt;                     }<br/&gt;                 &amp;lt;/td&amp;gt;<br/&gt;               else<br/&gt;                 &amp;lt;td&amp;gt;{fn:concat(&#34;$&#34;,$name)}&amp;lt;/td&amp;gt;<br/&gt;             }<br/&gt;           &amp;lt;/tr&amp;gt;<br/&gt;      }<br/&gt;    &amp;lt;/table&amp;gt;<br/&gt;   &amp;lt;/div&amp;gt;<br/&gt;<br/&gt;  else<br/&gt;    ()<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $variable as element() ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><p>  Construct the information to identify those functions (defined in other modules  from the current variable) that <i xmlns:xqdoc="http://www.xqdoc.org/1.0">use</i> the current variable.  If that   module exists in xqDoc, construct a link to the module and function.  If that module does not exist in xqDoc, simply identify the   module and function name.</p><ul><li>Parameters:</li><ul><li>$variable - the current variable<br></li><li>$local - indicates whether to build static HTML link for offline viewing or dynamic links for real-time viewing.<br></li></ul><li>Return:</li><ul><li> HTML </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="5">http://www.w3.org/2005/xpath-functions</td><td>concat</td></tr><tr><td>count</td></tr><tr><td>distinct-values</td></tr><tr><td>doc</td></tr><tr><td>exists</td></tr></table></div><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">xqdoc-display.xqy</td><td><a href="#build-link">build-link</a></td></tr><tr><td><a href="#decode-uri">decode-uri</a></td></tr><tr><td><a href="#module-uri">module-uri</a></td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#print-method-detail">print-method-detail</a></td></tr></table></div><div class="methoddetail"><h6>Internal Variables used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Variable Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#$XQDOC_LITE">$XQDOC_LITE</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-footer"><h5><a name="print-footer"></a>print-footer</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-footer($uri as xs:string) as element()*{<br/&gt;<br/&gt;&amp;lt;div align=&#34;left&#34;&amp;gt;<br/&gt;     &amp;lt;i&amp;gt;Created by xqDoc{if ($display:XQDOC_LITE) then &#34;-Lite&#34; else () } version {xs:string(fn:doc($uri)/xq:xqdoc/xq:control/xq:version) } on {xs:string(fn:doc($uri)/xq:xqdoc/xq:control/xq:date) }&amp;lt;/i&amp;gt;<br/&gt;&amp;lt;/div&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $uri as xs:string) as element()*<br><br></li></ul><p>  Construct the fotter information for the current module.  The footer will contain the version of the xqDoc conversion program  used to generate the xqDoc XML stored in the XML database and the  time when the XML was created.  If the xqDoc conversion program was not  used (i.e. XPath F &amp; O) then this information will be marked as N/A.</p><ul><li>Parameters:</li><ul><li>$uri - the current module uri<br></li></ul><li>Return:</li><ul><li> HTML </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>doc</td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#print-module-control">print-module-control</a></td></tr></table></div><div class="methoddetail"><h6>Internal Variables used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Variable Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#$XQDOC_LITE">$XQDOC_LITE</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-imports"><h5><a name="print-imports"></a>print-imports</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-imports($uri as xs:string, $local as xs:boolean) as element()*{<br/&gt;  if (fn:exists(fn:doc($uri)/xq:xqdoc/xq:imports/xq:import)) then<br/&gt;       (&amp;lt;h4&amp;gt;Imported Modules&amp;lt;/h4&amp;gt;,<br/&gt;        &amp;lt;div id=&#34;imports&#34;&amp;gt;<br/&gt;          {<br/&gt;            for $v in fn:doc($uri)/xq:xqdoc/xq:imports/xq:import<br/&gt;            return <br/&gt;              &amp;lt;div&amp;gt;<br/&gt;               &amp;lt;ul class=&#34;method&#34;&amp;gt;<br/&gt;               &amp;lt;li class=&#34;left&#34;&amp;gt;<br/&gt;               {<br/&gt;               if ($display:XQDOC_LITE) then<br/&gt;                 (display:decode-uri(xs:string($v/xq:uri)))<br/&gt;               else if (fn:exists(fn:collection($display:XQDOC_COLLECTION)/xq:xqdoc/xq:module[xq:uri = $v/xq:uri])) then<br/&gt;                 display:build-link(&#34;get-module&#34;,<br/&gt;                                    $local, <br/&gt;                                    fn:base-uri(fn:collection($display:XQDOC_COLLECTION)/xq:xqdoc/xq:module[xq:uri = $v/xq:uri]),<br/&gt;                                    display:decode-uri(xs:string($v/xq:uri)))<br/&gt;               else<br/&gt;                 display:decode-uri(xs:string($v/xq:uri)) <br/&gt;               }<br/&gt;               &amp;lt;/li&amp;gt;<br/&gt;               &amp;lt;li class=&#34;right&#34;&amp;gt; {$v/xq:comment/xq:description/node() }&amp;lt;/li&amp;gt;           <br/&gt;               &amp;lt;/ul&amp;gt;<br/&gt;               &amp;lt;ul&amp;gt;<br/&gt;               { display:print-comment($v/xq:comment/xq:since, &#34;Since:&#34;, $local) }<br/&gt;               { display:print-comment($v/xq:comment/xq:see, &#34;See:&#34;, $local) }<br/&gt;               &amp;lt;/ul&amp;gt;<br/&gt;              &amp;lt;/div&amp;gt;<br/&gt;            }<br/&gt;        &amp;lt;/div&amp;gt;)<br/&gt;  else<br/&gt;    ()<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $uri as xs:string ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><p>  Construct the high-level xqDoc HTML for any modules  imported by the module.  </p><ul><li>Parameters:</li><ul><li>$uri - the URI for the module<br></li><li>$local - indicates whether to build static HTML link for offline viewing or dynamic links for real-time viewing.<br></li></ul><li>Return:</li><ul><li> HTML. </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="4">http://www.w3.org/2005/xpath-functions</td><td>base-uri</td></tr><tr><td>collection</td></tr><tr><td>doc</td></tr><tr><td>exists</td></tr></table></div><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">xqdoc-display.xqy</td><td><a href="#build-link">build-link</a></td></tr><tr><td><a href="#decode-uri">decode-uri</a></td></tr><tr><td><a href="#print-comment">print-comment</a></td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#print-module-control">print-module-control</a></td></tr></table></div><div class="methoddetail"><h6>Internal Variables used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Variable Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="2">xqdoc-display.xqy</td><td><a href="#$XQDOC_COLLECTION">$XQDOC_COLLECTION</a></td></tr><tr><td><a href="#$XQDOC_LITE">$XQDOC_LITE</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-internal-functions-invoked"><h5><a name="print-internal-functions-invoked"></a>print-internal-functions-invoked</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-internal-functions-invoked($function as element(), $local as xs:boolean) as element()*{<br/&gt;  if (fn:exists($function/xq:invoked[xq:uri = display:module-uri($function)])) then<br/&gt;    &amp;lt;div class=&#34;methoddetail&#34;&amp;gt;<br/&gt;     &amp;lt;h6&amp;gt;Internal Functions used by this Function&amp;lt;/h6&amp;gt;<br/&gt;     &amp;lt;table class=&#34;inexternal&#34;&amp;gt;<br/&gt;       &amp;lt;tr&amp;gt;<br/&gt;        &amp;lt;th align=&#34;left&#34;&amp;gt;Module URI&amp;lt;/th&amp;gt;<br/&gt;        &amp;lt;th align=&#34;left&#34;&amp;gt;Function Name&amp;lt;/th&amp;gt;<br/&gt;       &amp;lt;/tr&amp;gt;<br/&gt;      {<br/&gt;       let $uris := for $x in fn:distinct-values($function/xq:invoked/xq:uri)<br/&gt;                    where $x = display:module-uri($function)<br/&gt;                    order by xs:string($x)<br/&gt;                    return xs:string($x)<br/&gt;       for $uri in $uris<br/&gt;       let $names := for $y in $function/xq:invoked[xq:uri=$uri]<br/&gt;                     order by xs:string($y/xq:name)<br/&gt;                     return xs:string($y/xq:name)<br/&gt;       for $name at $i in $names<br/&gt;       return<br/&gt;         if ($i = 1) then<br/&gt;%09%09(&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;{&#34;&amp;#160;&#34;}&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;{&#34;&amp;#160;&#34;}&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;,<br/&gt;            &amp;lt;tr&amp;gt;<br/&gt;             &amp;lt;td rowspan=&#34;{fn:count($names)}&#34;&amp;gt;{display:decode-uri($uri)}&amp;lt;/td&amp;gt;<br/&gt;             {<br/&gt;               if ($display:XQDOC_LITE) then<br/&gt;                 &amp;lt;td&amp;gt;&amp;lt;a href=&#34;#{$name}&#34;&amp;gt;{$name}&amp;lt;/a&amp;gt;&amp;lt;/td&amp;gt;<br/&gt;               else if (fn:exists(fn:doc($uri)/xq:xqdoc/xq:functions/xq:function[xq:name = $name])) then<br/&gt;                 &amp;lt;td&amp;gt;<br/&gt;                     {<br/&gt;                       display:build-link(&#34;get-module&#34;,<br/&gt;                                          $local, <br/&gt;                                          ($uri, $name),<br/&gt;                                          $name)<br/&gt;                     }<br/&gt;                 &amp;lt;/td&amp;gt;<br/&gt;               else<br/&gt;                 &amp;lt;td&amp;gt;{$name}&amp;lt;/td&amp;gt;<br/&gt;             }<br/&gt;           &amp;lt;/tr&amp;gt;)<br/&gt;         else if ($display:XQDOC_LITE) then<br/&gt;           &amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;&amp;lt;a href=&#34;#{$name}&#34;&amp;gt;{$name}&amp;lt;/a&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;<br/&gt;%09     else<br/&gt;           &amp;lt;tr&amp;gt;<br/&gt;             {<br/&gt;               if (fn:exists(fn:doc($uri)/xq:xqdoc/xq:functions/xq:function[xq:name = $name])) then<br/&gt;                 &amp;lt;td&amp;gt;<br/&gt;                     {<br/&gt;                       display:build-link(&#34;get-module&#34;,<br/&gt;                                          $local, <br/&gt;                                          ($uri, $name),<br/&gt;                                          $name)<br/&gt;                     }<br/&gt;                 &amp;lt;/td&amp;gt;<br/&gt;               else<br/&gt;                 &amp;lt;td&amp;gt;{$name}&amp;lt;/td&amp;gt;<br/&gt;             }<br/&gt;           &amp;lt;/tr&amp;gt;<br/&gt;      }<br/&gt;    &amp;lt;/table&amp;gt;<br/&gt;   &amp;lt;/div&amp;gt;<br/&gt;<br/&gt;  else<br/&gt;    ()<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $function as element() ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><p>  Construct the information to identify those functions (contained in the module  for the current function) that are <i xmlns:xqdoc="http://www.xqdoc.org/1.0">used by</i> the current function.    Construct a link to the module and function.</p><ul><li>Parameters:</li><ul><li>$function - the current function<br></li><li>$local - indicates whether to build static HTML link for offline viewing or dynamic links for real-time viewing.<br></li></ul><li>Return:</li><ul><li> HTML </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="4">http://www.w3.org/2005/xpath-functions</td><td>count</td></tr><tr><td>distinct-values</td></tr><tr><td>doc</td></tr><tr><td>exists</td></tr></table></div><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">xqdoc-display.xqy</td><td><a href="#build-link">build-link</a></td></tr><tr><td><a href="#decode-uri">decode-uri</a></td></tr><tr><td><a href="#module-uri">module-uri</a></td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#print-method-detail">print-method-detail</a></td></tr></table></div><div class="methoddetail"><h6>Internal Variables used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Variable Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#$XQDOC_LITE">$XQDOC_LITE</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-internal-functions-invoked-by"><h5><a name="print-internal-functions-invoked-by"></a>print-internal-functions-invoked-by</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-internal-functions-invoked-by($function as element(), $local as xs:boolean) as element()*{<br/&gt;<br/&gt;  if (fn:exists(fn:root($function)/xq:xqdoc/xq:functions/xq:function/xq:invoked[display:module-uri(.) = display:module-uri($function) and xq:uri=display:module-uri($function) and xq:name=xs:string($function/xq:name)])) then<br/&gt;    &amp;lt;div class=&#34;methoddetail&#34;&amp;gt;<br/&gt;     &amp;lt;h6&amp;gt;Internal Functions that invoke this Function&amp;lt;/h6&amp;gt;<br/&gt;     &amp;lt;table class=&#34;inexternal&#34;&amp;gt;<br/&gt;       &amp;lt;tr&amp;gt;<br/&gt;        &amp;lt;th align=&#34;left&#34;&amp;gt;Module URI&amp;lt;/th&amp;gt;<br/&gt;        &amp;lt;th align=&#34;left&#34;&amp;gt;Function Name&amp;lt;/th&amp;gt;<br/&gt;       &amp;lt;/tr&amp;gt;<br/&gt;       {<br/&gt;        let $list := for $x in fn:root($function)/xq:xqdoc/xq:functions/xq:function/xq:invoked[xq:uri=display:module-uri($function) and xq:name=xs:string($function/xq:name)]<br/&gt;                     return $x<br/&gt;        let $uris := fn:distinct-values(for $y in $list<br/&gt;                                     where display:module-uri($y) = display:module-uri($function)<br/&gt;                                     order by display:module-uri($y)<br/&gt;                                     return<br/&gt;                                       display:module-uri($y))<br/&gt;        for $uri in $uris<br/&gt;        let $entries := for $entry in $list<br/&gt;                        where display:module-uri($entry)=$uri<br/&gt;                        order by $entry/../xq:name<br/&gt;                        return $entry<br/&gt;        for $entry at $i in $entries<br/&gt;        return <br/&gt;           if ($i = 1) then<br/&gt;%09%09(&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;{&#34;&amp;#160;&#34;}&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;{&#34;&amp;#160;&#34;}&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;,<br/&gt;            &amp;lt;tr&amp;gt;<br/&gt;             &amp;lt;td rowspan=&#34;{fn:count($entries)}&#34;&amp;gt;{display:decode-uri($uri)}&amp;lt;/td&amp;gt;<br/&gt;             {<br/&gt;               if ($display:XQDOC_LITE) then<br/&gt;                 &amp;lt;td&amp;gt;&amp;lt;a href=&#34;{concat(&#34;#&#34;,xs:string($entry/../xq:name))}&#34;&amp;gt;{xs:string($entry/../xq:name)}&amp;lt;/a&amp;gt;&amp;lt;/td&amp;gt;<br/&gt;               else if (fn:exists(fn:doc($uri)/xq:xqdoc/xq:functions/xq:function[xq:name = $entry/../xq:name])) then<br/&gt;                 &amp;lt;td&amp;gt;<br/&gt;                     {<br/&gt;                       display:build-link(&#34;get-module&#34;,<br/&gt;                                          $local, <br/&gt;                                          ($uri, xs:string($entry/../xq:name)),<br/&gt;                                          xs:string($entry/../xq:name))<br/&gt;                     }<br/&gt;                 &amp;lt;/td&amp;gt;<br/&gt;               else<br/&gt;                 &amp;lt;td&amp;gt;{xs:string($entry/../xq:name)}&amp;lt;/td&amp;gt;<br/&gt;             }<br/&gt;            &amp;lt;/tr&amp;gt;)<br/&gt;           else <br/&gt;            &amp;lt;tr&amp;gt;<br/&gt;             {<br/&gt;               if ($display:XQDOC_LITE) then<br/&gt;                 &amp;lt;td&amp;gt;&amp;lt;a href=&#34;{concat(&#34;#&#34;,xs:string($entry/../xq:name))}&#34;&amp;gt;{xs:string($entry/../xq:name)}&amp;lt;/a&amp;gt;&amp;lt;/td&amp;gt;<br/&gt;               else if (fn:exists(fn:doc($uri)/xq:xqdoc/xq:functions/xq:function[xq:name = $entry/../xq:name])) then<br/&gt;                 &amp;lt;td&amp;gt;<br/&gt;                     {<br/&gt;                       display:build-link(&#34;get-module&#34;,<br/&gt;                                          $local, <br/&gt;                                          ($uri, xs:string($entry/../xq:name)),<br/&gt;                                          xs:string($entry/../xq:name))<br/&gt;                     }<br/&gt;                 &amp;lt;/td&amp;gt;<br/&gt;               else<br/&gt;                 &amp;lt;td&amp;gt;{xs:string($entry/../xq:name)}&amp;lt;/td&amp;gt;<br/&gt;             }<br/&gt;            &amp;lt;/tr&amp;gt;<br/&gt;        }<br/&gt;        &amp;lt;/table&amp;gt;<br/&gt;       &amp;lt;/div&amp;gt;<br/&gt;   else<br/&gt;    ()<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $function as element() ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><p>  Construct the information to identify those functions (contained in the module  for the current function) that <i xmlns:xqdoc="http://www.xqdoc.org/1.0">use</i> the current function.    Construct a link to the module and function.</p><ul><li>Parameters:</li><ul><li>$function - the current function<br></li><li>$local - indicates whether to build static HTML link for offline viewing or dynamic links for real-time viewing.<br></li></ul><li>Return:</li><ul><li> HTML </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="6">http://www.w3.org/2005/xpath-functions</td><td>concat</td></tr><tr><td>count</td></tr><tr><td>distinct-values</td></tr><tr><td>doc</td></tr><tr><td>exists</td></tr><tr><td>root</td></tr></table></div><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">xqdoc-display.xqy</td><td><a href="#build-link">build-link</a></td></tr><tr><td><a href="#decode-uri">decode-uri</a></td></tr><tr><td><a href="#module-uri">module-uri</a></td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#print-method-detail">print-method-detail</a></td></tr></table></div><div class="methoddetail"><h6>Internal Variables used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Variable Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#$XQDOC_LITE">$XQDOC_LITE</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-internal-variable-references"><h5><a name="print-internal-variable-references"></a>print-internal-variable-references</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-internal-variable-references($variable as element(), $local as xs:boolean) as element()*{<br/&gt;  if (fn:exists(fn:root($variable)/xq:xqdoc/xq:functions/xq:function/xq:ref-variable[display:module-uri(.) = display:module-uri($variable) and xq:uri=display:module-uri($variable) and xq:name=xs:string($variable/xq:uri)])) then<br/&gt;    &amp;lt;div class=&#34;methoddetail&#34;&amp;gt;<br/&gt;     &amp;lt;h6&amp;gt;Internal Functions that reference this Variable&amp;lt;/h6&amp;gt;<br/&gt;     &amp;lt;table class=&#34;inexternal&#34;&amp;gt;<br/&gt;       &amp;lt;tr&amp;gt;<br/&gt;        &amp;lt;th align=&#34;left&#34;&amp;gt;Module URI&amp;lt;/th&amp;gt;<br/&gt;        &amp;lt;th align=&#34;left&#34;&amp;gt;Function Name&amp;lt;/th&amp;gt;<br/&gt;       &amp;lt;/tr&amp;gt;<br/&gt;       {<br/&gt;        let $list := for $x in (fn:root($variable))/xq:xqdoc/xq:functions/xq:function/xq:ref-variable[xq:uri=display:module-uri($variable) and xq:name=xs:string($variable/xq:uri)]<br/&gt;                     return $x<br/&gt;        let $uris := fn:distinct-values(for $y in $list<br/&gt;                                     where display:module-uri($y) = display:module-uri($variable)<br/&gt;                                     order by display:module-uri($y)<br/&gt;                                     return<br/&gt;                                       display:module-uri($y))<br/&gt;        for $uri in $uris<br/&gt;        let $entries := for $entry in $list<br/&gt;                        where display:module-uri($entry)=$uri<br/&gt;                        order by $entry/../xq:name<br/&gt;                        return $entry<br/&gt;        for $entry at $i in $entries<br/&gt;        return <br/&gt;           if ($i = 1) then<br/&gt;%09%09(&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;{&#34;&amp;#160;&#34;}&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;{&#34;&amp;#160;&#34;}&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;,<br/&gt;            &amp;lt;tr&amp;gt;<br/&gt;             &amp;lt;td rowspan=&#34;{fn:count($entries)}&#34;&amp;gt;{display:decode-uri($uri)}&amp;lt;/td&amp;gt;<br/&gt;             {<br/&gt;%09%09%09   if ($display:XQDOC_LITE) then<br/&gt;                 &amp;lt;td&amp;gt;&amp;lt;a href=&#34;{concat(&#34;#&#34;,xs:string($entry/../xq:name))}&#34;&amp;gt;{xs:string($entry/../xq:name)}&amp;lt;/a&amp;gt;&amp;lt;/td&amp;gt;<br/&gt;               else if (fn:exists(fn:doc($uri)/xq:xqdoc/xq:functions/xq:function[xq:name = $entry/../xq:name])) then<br/&gt;                 &amp;lt;td&amp;gt;<br/&gt;                     {<br/&gt;                       display:build-link(&#34;get-module&#34;,<br/&gt;                                          $local, <br/&gt;                                          ($uri, xs:string($entry/../xq:name)),<br/&gt;                                          xs:string($entry/../xq:name))<br/&gt;                     }<br/&gt;                 &amp;lt;/td&amp;gt;<br/&gt;               else<br/&gt;                 &amp;lt;td&amp;gt;{xs:string($entry/../xq:name)}&amp;lt;/td&amp;gt;<br/&gt;             }<br/&gt;            &amp;lt;/tr&amp;gt;)<br/&gt;           else<br/&gt;            &amp;lt;tr&amp;gt;<br/&gt;             {<br/&gt;%09%09%09   if ($display:XQDOC_LITE) then<br/&gt;                 &amp;lt;td&amp;gt;&amp;lt;a href=&#34;{concat(&#34;#&#34;,xs:string($entry/../xq:name))}&#34;&amp;gt;{xs:string($entry/../xq:name)}&amp;lt;/a&amp;gt;&amp;lt;/td&amp;gt;<br/&gt;               else if (fn:exists(fn:doc($uri)/xq:xqdoc/xq:functions/xq:function[xq:name = $entry/../xq:name])) then<br/&gt;                 &amp;lt;td&amp;gt;<br/&gt;                     {<br/&gt;                       display:build-link(&#34;get-module&#34;,<br/&gt;                                          $local, <br/&gt;                                          ($uri, xs:string($entry/../xq:name)),<br/&gt;                                          xs:string($entry/../xq:name))<br/&gt;                     }<br/&gt;                 &amp;lt;/td&amp;gt;<br/&gt;               else<br/&gt;                 &amp;lt;td&amp;gt;{xs:string($entry/../xq:name)}&amp;lt;/td&amp;gt;<br/&gt;             }<br/&gt;            &amp;lt;/tr&amp;gt;<br/&gt;        }<br/&gt;        &amp;lt;/table&amp;gt;<br/&gt;       &amp;lt;/div&amp;gt;<br/&gt;   else<br/&gt;    ()<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $variable as element() ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><p>  Construct the information to identify those functions (defined in the module  for the current variable) that <i xmlns:xqdoc="http://www.xqdoc.org/1.0">use</i> the current variable.    Construct a link to the module and function.</p><ul><li>Parameters:</li><ul><li>$variable - the current variable<br></li><li>$local - indicates whether to build static HTML link for offline viewing or dynamic links for real-time viewing.<br></li></ul><li>Return:</li><ul><li> HTML </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="6">http://www.w3.org/2005/xpath-functions</td><td>concat</td></tr><tr><td>count</td></tr><tr><td>distinct-values</td></tr><tr><td>doc</td></tr><tr><td>exists</td></tr><tr><td>root</td></tr></table></div><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">xqdoc-display.xqy</td><td><a href="#build-link">build-link</a></td></tr><tr><td><a href="#decode-uri">decode-uri</a></td></tr><tr><td><a href="#module-uri">module-uri</a></td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#print-variables">print-variables</a></td></tr></table></div><div class="methoddetail"><h6>Internal Variables used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Variable Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#$XQDOC_LITE">$XQDOC_LITE</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-internal-variables-referenced"><h5><a name="print-internal-variables-referenced"></a>print-internal-variables-referenced</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-internal-variables-referenced($variable as element(), $local as xs:boolean) as element()*{<br/&gt;  if (fn:exists($variable/xq:ref-variable[xq:uri = display:module-uri($variable)])) then<br/&gt;    &amp;lt;div class=&#34;methoddetail&#34;&amp;gt;<br/&gt;     &amp;lt;h6&amp;gt;Internal Variables used by this Function&amp;lt;/h6&amp;gt;<br/&gt;     &amp;lt;table class=&#34;inexternal&#34;&amp;gt;<br/&gt;       &amp;lt;tr&amp;gt;<br/&gt;        &amp;lt;th align=&#34;left&#34;&amp;gt;Module URI&amp;lt;/th&amp;gt;<br/&gt;        &amp;lt;th align=&#34;left&#34;&amp;gt;Variable Name&amp;lt;/th&amp;gt;<br/&gt;       &amp;lt;/tr&amp;gt;<br/&gt;      {<br/&gt;       let $uris := for $x in fn:distinct-values($variable/xq:ref-variable/xq:uri)<br/&gt;                    where $x = display:module-uri($variable)<br/&gt;                    order by xs:string($x)<br/&gt;                    return xs:string($x)<br/&gt;       for $uri in $uris<br/&gt;       let $names := for $y in $variable/xq:ref-variable[xq:uri=$uri]<br/&gt;                     order by xs:string($y/xq:name)<br/&gt;                     return xs:string($y/xq:name)<br/&gt;       for $name at $i in $names<br/&gt;       return<br/&gt;         if ($i = 1) then<br/&gt;%09%09(&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;{&#34;&amp;#160;&#34;}&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;{&#34;&amp;#160;&#34;}&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;,<br/&gt;            &amp;lt;tr&amp;gt;<br/&gt;             &amp;lt;td rowspan=&#34;{fn:count($names)}&#34;&amp;gt;{display:decode-uri($uri)}&amp;lt;/td&amp;gt;<br/&gt;             {<br/&gt;               if ($display:XQDOC_LITE) then<br/&gt;                 &amp;lt;td&amp;gt;&amp;lt;a href=&#34;#{fn:concat(&#34;$&#34;,$name)}&#34;&amp;gt;{fn:concat(&#34;$&#34;,$name)}&amp;lt;/a&amp;gt;&amp;lt;/td&amp;gt;<br/&gt;               else if (fn:exists(fn:doc($uri)/xq:xqdoc/xq:variables/xq:variable[xq:uri = $name])) then<br/&gt;                 &amp;lt;td&amp;gt;<br/&gt;                     {<br/&gt;                       display:build-link(&#34;get-module&#34;,<br/&gt;                                          $local, <br/&gt;                                          ($uri, fn:concat(&#34;$&#34;,$name)),<br/&gt;                                          fn:concat(&#34;$&#34;,$name))<br/&gt;                     }<br/&gt;                 &amp;lt;/td&amp;gt;<br/&gt;               else<br/&gt;                 &amp;lt;td&amp;gt;{fn:concat(&#34;$&#34;,$name)}&amp;lt;/td&amp;gt;<br/&gt;             }<br/&gt;           &amp;lt;/tr&amp;gt;)<br/&gt;         else if ($display:XQDOC_LITE) then  <br/&gt;%09%09   &amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;&amp;lt;a href=&#34;#{fn:concat(&#34;$&#34;,$name)}&#34;&amp;gt;{fn:concat(&#34;$&#34;,$name)}&amp;lt;/a&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;       <br/&gt;         else<br/&gt;           &amp;lt;tr&amp;gt;<br/&gt;             {<br/&gt;               if (fn:exists(fn:doc($uri)/xq:xqdoc/xq:variables/xq:variable[xq:uri = $name])) then<br/&gt;                 &amp;lt;td&amp;gt;<br/&gt;                     {<br/&gt;                       display:build-link(&#34;get-module&#34;,<br/&gt;                                          $local, <br/&gt;                                          ($uri, fn:concat(&#34;$&#34;,$name)),<br/&gt;                                          fn:concat(&#34;$&#34;,$name))<br/&gt;                     }<br/&gt;                 &amp;lt;/td&amp;gt;<br/&gt;               else<br/&gt;                 &amp;lt;td&amp;gt;{fn:concat(&#34;$&#34;,$name)}&amp;lt;/td&amp;gt;<br/&gt;             }<br/&gt;           &amp;lt;/tr&amp;gt;<br/&gt;      }<br/&gt;    &amp;lt;/table&amp;gt;<br/&gt;   &amp;lt;/div&amp;gt;<br/&gt;<br/&gt;  else<br/&gt;    ()<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $variable as element() ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><p>  Construct the information to identify those functions (defined in the module  for the current variable) that <i xmlns:xqdoc="http://www.xqdoc.org/1.0">use</i> the current variable.    Construct a link to the module and function.</p><ul><li>Parameters:</li><ul><li>$variable - the current variable<br></li><li>$local - indicates whether to build static HTML link for offline viewing or dynamic links for real-time viewing.<br></li></ul><li>Return:</li><ul><li> HTML </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="5">http://www.w3.org/2005/xpath-functions</td><td>concat</td></tr><tr><td>count</td></tr><tr><td>distinct-values</td></tr><tr><td>doc</td></tr><tr><td>exists</td></tr></table></div><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">xqdoc-display.xqy</td><td><a href="#build-link">build-link</a></td></tr><tr><td><a href="#decode-uri">decode-uri</a></td></tr><tr><td><a href="#module-uri">module-uri</a></td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#print-method-detail">print-method-detail</a></td></tr></table></div><div class="methoddetail"><h6>Internal Variables used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Variable Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#$XQDOC_LITE">$XQDOC_LITE</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-intro"><h5><a name="print-intro"></a>print-intro</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-intro($local as xs:boolean) as element()+{<br/&gt;  (&amp;lt;h3&amp;gt;Welcome to xqDoc&amp;lt;/h3&amp;gt;,<br/&gt;  &amp;lt;div class=&#34;overview&#34;&amp;gt;<br/&gt;  &amp;lt;p&amp;gt;This site presents documentation and cross-referencing information for both XQuery library<br/&gt;  and main modules that have been converted into xqDoc XML.   <br/&gt;  Visit &amp;lt;a href=&#34;http://www.xqdoc.org&#34;&amp;gt;xqdoc.org&amp;lt;/a&amp;gt; to find the latest developments for this XQuery<br/&gt;  open source tool.&amp;lt;/p&amp;gt;<br/&gt;  &amp;lt;/div&amp;gt;<br/&gt;  )<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $local as xs:boolean) as element()+<br><br></li></ul><p>   Construct the welcome banner for the xqDoc home page.</p><ul><li>Parameters:</li><ul><li>$local - indicates whether to build static HTML link for offline viewing or dynamic linke for real-time viewing.<br></li></ul><li>Return:</li><ul><li> HTML. </li></ul></ul><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#get-default-html">get-default-html</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-method-detail"><h5><a name="print-method-detail"></a>print-method-detail</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-method-detail($uri as xs:string, $local as xs:boolean) as item()*{<br/&gt;  if (fn:exists(fn:doc($uri)/xq:xqdoc/xq:functions/xq:function)) then<br/&gt;    (&amp;lt;h4&amp;gt;Function Detail&amp;lt;/h4&amp;gt;,<br/&gt;     &amp;lt;div id=&#34;methoddetail&#34;&amp;gt;<br/&gt;     {<br/&gt;      for $f in fn:doc($uri)/xq:xqdoc/xq:functions/xq:function<br/&gt;      order by fn:normalize-space(xs:string($f/xq:name)) ascending<br/&gt;      return<br/&gt;        (&amp;lt;div id=&#34;{fn:normalize-space(xs:string($f/xq:name))}&#34; class=&#34;methoddetail&#34;&amp;gt;<br/&gt;         &amp;lt;h5&amp;gt;&amp;lt;a name=&#34;{fn:normalize-space(xs:string($f/xq:name))}&#34;/&amp;gt;{fn:normalize-space(xs:string($f/xq:name))}&amp;lt;/h5&amp;gt;<br/&gt;         &amp;lt;ul class=&#34;method&#34;&amp;gt;<br/&gt;           &amp;lt;li class=&#34;left&#34;&amp;gt;<br/&gt;           {<br/&gt;             <br/&gt;             <br/&gt;             if (fn:exists($f/xq:body)) then<br/&gt;               display:build-link(&#34;get-code&#34;,<br/&gt;                                 $local, <br/&gt;                                 ($uri,fn:normalize-space(xs:string($f/xq:name))),<br/&gt;                                 fn:normalize-space(xs:string($f/xq:name)))<br/&gt;             else<br/&gt;               ()<br/&gt;           }<br/&gt;           &amp;lt;/li&amp;gt;<br/&gt;           &amp;lt;li class=&#34;right&#34;&amp;gt;     <br/&gt;              { display:print-signature($f/xq:signature, fn:false()) }<br/&gt;           &amp;lt;/li&amp;gt;<br/&gt;         &amp;lt;/ul&amp;gt;<br/&gt;%09   {display:print-detail-comment($f/xq:comment/xq:description, (), $local)}<br/&gt;         &amp;lt;ul&amp;gt;<br/&gt;         {<br/&gt;           (display:print-detail-comment($f/xq:comment/xq:param, &#34;Parameters:&#34;, $local),<br/&gt;            display:print-detail-comment($f/xq:comment/xq:return, &#34;Return:&#34;, $local),<br/&gt;            display:print-detail-comment($f/xq:comment/xq:error, &#34;Errors:&#34;, $local),<br/&gt;            display:print-detail-comment($f/xq:comment/xq:since, &#34;Since:&#34;, $local),<br/&gt;            display:print-detail-comment($f/xq:comment/xq:see, &#34;See:&#34;, $local),<br/&gt;            display:print-detail-comment($f/xq:comment/xq:deprecated, &#34;Deprecated:&#34;, $local) )<br/&gt;         }<br/&gt;         &amp;lt;/ul&amp;gt;<br/&gt;         {<br/&gt;%09%09 if ($display:XQDOC_LITE) then<br/&gt;           (display:print-external-functions-invoked($f, $local),<br/&gt;            display:print-internal-functions-invoked($f, $local), <br/&gt;%09%09    display:print-internal-functions-invoked-by($f, $local),<br/&gt;%09%09%09display:print-internal-variables-referenced($f, $local),<br/&gt;            display:print-external-variables-referenced($f, $local))<br/&gt;         else<br/&gt;           (display:print-external-functions-invoked($f, $local),   <br/&gt;            display:print-external-functions-invoked-by($f, $local),      <br/&gt;            display:print-internal-functions-invoked($f, $local),    <br/&gt;            display:print-internal-functions-invoked-by($f, $local),  <br/&gt;            display:print-internal-variables-referenced($f, $local),<br/&gt;            display:print-external-variables-referenced($f, $local))<br/&gt;         }<br/&gt;         &amp;lt;/div&amp;gt;,  &#34;&amp;#160;&#34;)<br/&gt;    }<br/&gt;    &amp;lt;/div&amp;gt;, &#34;&amp;#160;&#34;)<br/&gt;  else<br/&gt;    ()    <br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $uri as xs:string ,<br>&nbsp; $local as xs:boolean) as item()*<br><br></li></ul><p>  Construct the xqDoc HTML method detail for each function defined  in the module.  The method detail will contain the function  signature and all xqDoc comments associated with the function.  In  addition, cross-reference links will be included for the following:  <ul xmlns:xqdoc="http://www.xqdoc.org/1.0">  <li>Functions (contained in this module) that <i>are used</i> by this function</li>  <li>Functions (not contained in this module) that <i>are used</i> by this function</li>  <li>Functions (contained in this module) that <i>use</i> this function</li>  <li>Functions (not contained in this module) that <i>use</i> this function</li>  <li>Variables (contained in this module) that <i>are used</i> by this function</li>  <li>Variables (not contained in this module) that <i>are used</i> by this function</li>  </ul></p><ul><li>Parameters:</li><ul><li>$uri - the URI for the module<br></li><li>$local - indicates whether to build static HTML link for offline viewing or dynamic links for real-time viewing.<br></li></ul><li>Return:</li><ul><li> HTML. </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="4">http://www.w3.org/2005/xpath-functions</td><td>doc</td></tr><tr><td>exists</td></tr><tr><td>false</td></tr><tr><td>normalize-space</td></tr></table></div><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="9">xqdoc-display.xqy</td><td><a href="#build-link">build-link</a></td></tr><tr><td><a href="#print-detail-comment">print-detail-comment</a></td></tr><tr><td><a href="#print-external-functions-invoked">print-external-functions-invoked</a></td></tr><tr><td><a href="#print-external-functions-invoked-by">print-external-functions-invoked-by</a></td></tr><tr><td><a href="#print-external-variables-referenced">print-external-variables-referenced</a></td></tr><tr><td><a href="#print-internal-functions-invoked">print-internal-functions-invoked</a></td></tr><tr><td><a href="#print-internal-functions-invoked-by">print-internal-functions-invoked-by</a></td></tr><tr><td><a href="#print-internal-variables-referenced">print-internal-variables-referenced</a></td></tr><tr><td><a href="#print-signature">print-signature</a></td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#print-module-control">print-module-control</a></td></tr></table></div><div class="methoddetail"><h6>Internal Variables used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Variable Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#$XQDOC_LITE">$XQDOC_LITE</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-method-summary"><h5><a name="print-method-summary"></a>print-method-summary</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-method-summary($uri as xs:string) as element()*{<br/&gt;  if (fn:exists(fn:doc($uri)/xq:xqdoc/xq:functions/xq:function)) then<br/&gt;    (&amp;lt;h4&amp;gt;Function Summary&amp;lt;/h4&amp;gt;,<br/&gt;     &amp;lt;div id=&#34;methods&#34;&amp;gt; <br/&gt;     &amp;lt;a name=&#34;methods&#34;/&amp;gt;  <br/&gt;        {<br/&gt;         for $f in fn:doc($uri)/xq:xqdoc/xq:functions/xq:function<br/&gt;         order by fn:normalize-space(xs:string($f/xq:name)) ascending<br/&gt;         return<br/&gt;            &amp;lt;ul class=&#34;method&#34;&amp;gt;<br/&gt;              &amp;lt;li class=&#34;left&#34;&amp;gt;<br/&gt;               &amp;lt;a href=&#34;{fn:concat(&amp;apos;#&amp;apos;, fn:normalize-space(xs:string($f/xq:name)))}&#34;&amp;gt;{fn:normalize-space(xs:string($f/xq:name))}&amp;lt;/a&amp;gt;<br/&gt;               &amp;lt;div class=&#34;description&#34;&amp;gt;<br/&gt;               {<br/&gt;                 if (fn:exists($f/xq:comment/xq:description)) then <br/&gt;                    if (fn:substring-before($f/xq:comment/xq:description, &#34;.&#34;)) then<br/&gt;                      fn:concat(fn:substring-before($f/xq:comment/xq:description, &#34;.&#34;), &#34;.&#34;)<br/&gt;                    else<br/&gt;                      xs:string($f/xq:comment/xq:description)<br/&gt;                 else<br/&gt;                    ()<br/&gt;               }<br/&gt;               &amp;lt;/div&amp;gt;<br/&gt;              &amp;lt;/li&amp;gt;<br/&gt;              &amp;lt;li class=&#34;right&#34;&amp;gt;<br/&gt;               {display:print-signature($f/xq:signature, fn:true())}<br/&gt;              &amp;lt;/li&amp;gt;<br/&gt;            &amp;lt;/ul&amp;gt;<br/&gt;          }<br/&gt;    &amp;lt;/div&amp;gt;)<br/&gt;  else<br/&gt;    ()<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $uri as xs:string) as element()*<br><br></li></ul><p>  Construct the xqDoc HTML method summary for each function defined  in the module.  The method summary will contain the function  signature and the first <i xmlns:xqdoc="http://www.xqdoc.org/1.0">sentence</i> of any xqDoc comments associated  with the function.</p><ul><li>Parameters:</li><ul><li>$uri - the URI for the module<br></li></ul><li>Return:</li><ul><li> HTML. </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="6">http://www.w3.org/2005/xpath-functions</td><td>concat</td></tr><tr><td>doc</td></tr><tr><td>exists</td></tr><tr><td>normalize-space</td></tr><tr><td>substring-before</td></tr><tr><td>true</td></tr></table></div><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#print-signature">print-signature</a></td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#print-module-control">print-module-control</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-module"><h5><a name="print-module"></a>print-module</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-module($uri as xs:string, $local as xs:boolean) as element()*{<br/&gt;   (&amp;lt;h4&amp;gt;Module URI&amp;lt;/h4&amp;gt;,<br/&gt;    &amp;lt;h1&amp;gt;{ display:decode-uri(xs:string(fn:doc($uri)/xq:xqdoc/xq:module/xq:uri)) }&amp;lt;/h1&amp;gt;,<br/&gt;%09if ($display:XQDOC_LITE) then<br/&gt;      ()<br/&gt;    else if (fn:exists(fn:doc($uri)/xq:xqdoc/xq:module/xq:body)) then<br/&gt;      display:build-link(&#34;get-code&#34;,<br/&gt;                         $local, <br/&gt;                         $uri,<br/&gt;                         ())<br/&gt;    else<br/&gt;      (),<br/&gt;    if (fn:exists(fn:doc($uri)/xq:xqdoc/xq:module/xq:comment/xq:description) or<br/&gt;         fn:exists(fn:doc($uri)/xq:xqdoc/xq:module/xq:comment/xq:author) or<br/&gt;         fn:exists(fn:doc($uri)/xq:xqdoc/xq:module/xq:comment/xq:version) or<br/&gt;         fn:exists(fn:doc($uri)/xq:xqdoc/xq:module/xq:comment/xq:since) or<br/&gt;         fn:exists(fn:doc($uri)/xq:xqdoc/xq:module/xq:comment/xq:see)) then<br/&gt;           (&amp;lt;h4&amp;gt;Module Description&amp;lt;/h4&amp;gt;,<br/&gt;            display:print-comment(fn:doc($uri)/xq:xqdoc/xq:module/xq:comment/xq:description, (), $local),<br/&gt;            &amp;lt;ul&amp;gt;<br/&gt;              {<br/&gt;              (display:print-comment(fn:doc($uri)/xq:xqdoc/xq:module/xq:comment/xq:author, &#34;Author:&#34;, $local),<br/&gt;              display:print-comment(fn:doc($uri)/xq:xqdoc/xq:module/xq:comment/xq:version, &#34;Version:&#34;, $local),<br/&gt;              display:print-comment(fn:doc($uri)/xq:xqdoc/xq:module/xq:comment/xq:since, &#34;Since:&#34;, $local),<br/&gt;              display:print-comment(fn:doc($uri)/xq:xqdoc/xq:module/xq:comment/xq:see, &#34;See:&#34;, $local))<br/&gt;              }<br/&gt;            &amp;lt;/ul&amp;gt;)<br/&gt;    else<br/&gt;         ()<br/&gt;   )<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $uri as xs:string ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><p>  Construct the high-level xqDoc HTML for the module.  This is essentially any introductory xqDoc comments that might  be associated with the module.</p><ul><li>Parameters:</li><ul><li>$uri - the URI for the module<br></li><li>$local - indicates whether to build static HTML link for offline viewing or dynamic links for real-time viewing.<br></li></ul><li>Return:</li><ul><li> HTML. </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="2">http://www.w3.org/2005/xpath-functions</td><td>doc</td></tr><tr><td>exists</td></tr></table></div><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">xqdoc-display.xqy</td><td><a href="#build-link">build-link</a></td></tr><tr><td><a href="#decode-uri">decode-uri</a></td></tr><tr><td><a href="#print-comment">print-comment</a></td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#print-module-control">print-module-control</a></td></tr></table></div><div class="methoddetail"><h6>Internal Variables used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Variable Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#$XQDOC_LITE">$XQDOC_LITE</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-module-control"><h5><a name="print-module-control"></a>print-module-control</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-module-control($uri as xs:string, $local as xs:boolean) as item()+{<br/&gt;  ( display:print-module($uri, $local),<br/&gt;    display:print-variables($uri, $local),<br/&gt;    &#34;&amp;#160;&#34;,<br/&gt;    display:print-imports($uri, $local),<br/&gt;    &#34;&amp;#160;&#34;,<br/&gt;    display:print-method-summary($uri),<br/&gt;    &#34;&amp;#160;&#34;,<br/&gt;    display:print-method-detail($uri, $local),<br/&gt;    display:print-footer($uri) )<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $uri as xs:string ,<br>&nbsp; $local as xs:boolean) as item()+<br><br></li></ul><p>  The controller for constructing the xqDoc HTML information for  the specified module. The following information  for  each module will be generated.  <ul xmlns:xqdoc="http://www.xqdoc.org/1.0">  <li> Module introductory information</li>  <li> Global variables declared in this module</li>  <li> Modules imported by this module</li>  <li> Summary information for each function defined in the module</li>  <li> Detailed information for each function defined in the module</li>  </ul></p><ul><li>Parameters:</li><ul><li>$uri - the URI for the module<br></li><li>$local - indicates whether to build static HTML link for offline viewing or dynamic links for real-time viewing.<br></li></ul><li>Return:</li><ul><li> HTML. </li></ul></ul><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="6">xqdoc-display.xqy</td><td><a href="#print-footer">print-footer</a></td></tr><tr><td><a href="#print-imports">print-imports</a></td></tr><tr><td><a href="#print-method-detail">print-method-detail</a></td></tr><tr><td><a href="#print-method-summary">print-method-summary</a></td></tr><tr><td><a href="#print-module">print-module</a></td></tr><tr><td><a href="#print-variables">print-variables</a></td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#get-module-html">get-module-html</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-module-intro"><h5><a name="print-module-intro"></a>print-module-intro</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-module-intro($local as xs:boolean) as element(){<br/&gt;  display:build-link(&#34;default&#34;, $local, (), ())<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $local as xs:boolean) as element()<br><br></li></ul><p>  Construct the welcome banner for the xqDoc module page.</p><ul><li>Parameters:</li><ul><li>$local - indicates whether to build static HTML link for offline viewing or dynamic links for real-time viewing.<br></li></ul><li>Return:</li><ul><li> HTML. </li></ul></ul><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#build-link">build-link</a></td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#get-module-html">get-module-html</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-modules"><h5><a name="print-modules"></a>print-modules</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-modules($local as xs:boolean) as element()+{<br/&gt;  (&amp;lt;div class=&#34;home&#34;&amp;gt;<br/&gt;    {<br/&gt;    if (fn:exists(fn:collection($display:XQDOC_COLLECTION)/xq:xqdoc/xq:module[@type=&#34;library&#34;])) then<br/&gt;      (&amp;lt;h4&amp;gt;Library Modules&amp;lt;/h4&amp;gt;,<br/&gt;        &amp;lt;br/&amp;gt;,&amp;lt;br/&amp;gt;,<br/&gt;        for $x in fn:collection($display:XQDOC_COLLECTION)/xq:xqdoc[xq:module/@type=&#34;library&#34;]<br/&gt;        order by $x/xq:module/xq:uri<br/&gt;        return<br/&gt;         ( display:build-link(&#34;get-module&#34;,<br/&gt;                              $local, <br/&gt;                              (fn:base-uri($x)),<br/&gt;                               display:decode-uri(fn:string($x/xq:module/xq:uri))),<br/&gt;           &amp;lt;br/&amp;gt; )<br/&gt;        )           <br/&gt;    else<br/&gt;      ()<br/&gt;    }<br/&gt;    {<br/&gt;    if (fn:exists(fn:collection($display:XQDOC_COLLECTION)/xq:xqdoc/xq:module[@type=&#34;main&#34;])) then<br/&gt;      (&amp;lt;h4&amp;gt;Main Modules&amp;lt;/h4&amp;gt;,<br/&gt;        &amp;lt;br/&amp;gt;,&amp;lt;br/&amp;gt;,<br/&gt;        for $x in fn:collection($display:XQDOC_COLLECTION)/xq:xqdoc[xq:module/@type=&#34;main&#34;]<br/&gt;        order by $x/xq:module/xq:uri<br/&gt;        return<br/&gt;         ( display:build-link(&#34;get-module&#34;,<br/&gt;                               $local, <br/&gt;                               (fn:base-uri($x)),<br/&gt;                                display:decode-uri(xs:string($x/xq:module/xq:uri))),<br/&gt;           &amp;lt;br/&amp;gt; )<br/&gt;      )<br/&gt;    else<br/&gt;      ()<br/&gt;    }<br/&gt;    &amp;lt;/div&amp;gt;)<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $local as xs:boolean) as element()+<br><br></li></ul><p>  Construct the list of modules available to xqDoc for presentation.  The list of modules is availalbe on the xqDoc home page.</p><ul><li>Parameters:</li><ul><li>$local - indicates whether to build static HTML link for offline viewing or dynamic links for real-time viewing.<br></li></ul><li>Return:</li><ul><li> HTML. </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="4">http://www.w3.org/2005/xpath-functions</td><td>base-uri</td></tr><tr><td>collection</td></tr><tr><td>exists</td></tr><tr><td>string</td></tr></table></div><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="2">xqdoc-display.xqy</td><td><a href="#build-link">build-link</a></td></tr><tr><td><a href="#decode-uri">decode-uri</a></td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#get-default-html">get-default-html</a></td></tr></table></div><div class="methoddetail"><h6>Internal Variables used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Variable Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#$XQDOC_COLLECTION">$XQDOC_COLLECTION</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-preserve-newlines"><h5><a name="print-preserve-newlines"></a>print-preserve-newlines</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-preserve-newlines($strin as xs:string?) as item()*{<br/&gt;  for $i in fn:tokenize($strin, &#34;\n&#34;) <br/&gt;  return ($i, &amp;lt;br/&amp;gt;) <br/&gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $strin as xs:string?) as item()*<br><br></li></ul><p>  Modify the markup (i.e. newlines) associated with an XQuery function so that   it presents cleanly in HTML. </p><ul><li>Parameters:</li><ul><li>$strin - the code associated with an XQuery function<br></li></ul><li>Return:</li><ul><li> the presentation friendly version of the code  </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>tokenize</td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#get-code-html">get-code-html</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-preserve-xqdoc-lite"><h5><a name="print-preserve-xqdoc-lite"></a>print-preserve-xqdoc-lite</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-preserve-xqdoc-lite($strin as xs:string?) as xs:string*{<br/&gt;  let $count := fn:count(fn:tokenize($strin,&#34;&amp;lt;&#34;))<br/&gt;  let $tmp := for $i at $x in fn:tokenize($strin, &#34;&amp;lt;&#34;)<br/&gt;              return<br/&gt;                if ($count = $x) then<br/&gt;                  ($i)<br/&gt;                else<br/&gt;                  ($i, &#34;&amp;amp;lt;&#34;)<br/&gt;                  <br/&gt;  let $count := fn:count(fn:tokenize($strin,&#34;&amp;gt;&#34;))                  <br/&gt;  let $tmp := for $i at $x in fn:tokenize(fn:string-join($tmp,&#34;&#34;), &#34;&amp;gt;&#34;)<br/&gt;                return<br/&gt;                if ($count = $x) then<br/&gt;                  ($i)<br/&gt;                else<br/&gt;                  ($i, &#34;&amp;amp;gt;&#34;)<br/&gt;<br/&gt;  let $count := fn:count(fn:tokenize($strin,&#34;&amp;apos;&#34;))                  <br/&gt;  let $tmp := for $i at $x in fn:tokenize(fn:string-join($tmp,&#34;&#34;), &#34;&amp;apos;&#34;)<br/&gt;                return<br/&gt;                if ($count = $x) then<br/&gt;                  ($i)<br/&gt;                else<br/&gt;                  ($i, &#34;&amp;amp;apos;&#34;)<br/&gt;                     <br/&gt;  let $tmp := for $i in fn:tokenize(fn:string-join($tmp,&#34;&#34;), &#34;\n&#34;) <br/&gt;              return ($i, &#34;&amp;lt;br/&amp;gt;&#34;) <br/&gt;  return $tmp              <br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $strin as xs:string?) as xs:string*<br><br></li></ul><p>  Modify the markup (i.e. newlines) associated with an XQuery function so that   it presents cleanly in HTML.   This function is specific to the 'lite' version  of xqDoc (where an underlying XML database is not used to store the intermediate  xqDoc XML.</p><ul><li>Parameters:</li><ul><li>$strin - the code associated with an XQuery function<br></li></ul><li>Return:</li><ul><li> the presentation friendly version of the code  </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">http://www.w3.org/2005/xpath-functions</td><td>count</td></tr><tr><td>string-join</td></tr><tr><td>tokenize</td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#build-link">build-link</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-signature"><h5><a name="print-signature"></a>print-signature</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-signature($sigs as xs:string*, $local as xs:boolean) as item()*{<br/&gt;  for $sig at $cnt in $sigs<br/&gt;  return<br/&gt;  (let $params := fn:substring-after($sig, &#34;(&#34;)<br/&gt;   let $tokens := fn:tokenize($params, &#34;,&#34;)<br/&gt;   let $count := fn:count($tokens)<br/&gt;   return<br/&gt;     (if ($cnt &amp;gt; 1) then <br/&gt;%09  (&#34;OR&#34;, &amp;lt;br/&amp;gt;,&amp;lt;br/&amp;gt;)<br/&gt;      else<br/&gt;        (),<br/&gt;      for $token at $index in $tokens<br/&gt;      return<br/&gt;       (if ($index = 1) then<br/&gt;          xs:string(&#34;(&#34;)<br/&gt;        else<br/&gt;          (),<br/&gt;        if ($index = 1) then<br/&gt;%09    fn:normalize-space($token)<br/&gt;        else<br/&gt;          (&#34;&amp;#160;&#34;, fn:normalize-space($token)),<br/&gt;        if ($index &amp;lt; $count) then<br/&gt;          xs:string(&#34;,&#34;)<br/&gt;        else<br/&gt;          (),<br/&gt;        &amp;lt;br/&amp;gt;)), <br/&gt;  &amp;lt;br/&amp;gt;)<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $sigs as xs:string* ,<br>&nbsp; $local as xs:boolean) as item()*<br><br></li></ul><p>  Construct the xqDoc HTML for the function signature.</p><ul><li>Parameters:</li><ul><li>$sigs - the signatures associated with the current function. Although only one signature is allowed for user-defined functions, more than one signature is required to support other 'modules' such as XPath F &amp; O.<br></li><li>$local - indicates whether to build static HTML link for offline viewing or dynamic links for real-time viewing.<br></li></ul><li>Return:</li><ul><li> String containing the marked up function signature. </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="4">http://www.w3.org/2005/xpath-functions</td><td>count</td></tr><tr><td>normalize-space</td></tr><tr><td>substring-after</td></tr><tr><td>tokenize</td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="2">xqdoc-display.xqy</td><td><a href="#print-method-detail">print-method-detail</a></td></tr><tr><td><a href="#print-method-summary">print-method-summary</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="print-variables"><h5><a name="print-variables"></a>print-variables</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function display:print-variables($uri as xs:string, $local as xs:boolean) as element()*{<br/&gt;  if (fn:exists(fn:doc($uri)/xq:xqdoc/xq:variables/xq:variable)) then<br/&gt;      (&amp;lt;h4&amp;gt;Variables&amp;lt;/h4&amp;gt;, <br/&gt;       &amp;lt;div id=&#34;variables&#34;&amp;gt;<br/&gt;       {<br/&gt;            for $v in fn:doc($uri)/xq:xqdoc/xq:variables/xq:variable<br/&gt;            return <br/&gt;                &amp;lt;div&amp;gt;<br/&gt;                 &amp;lt;a name=&#34;{ fn:concat(&#34;$&#34;, xs:string($v/xq:uri)) }&#34;/&amp;gt;<br/&gt;                 &amp;lt;ul class=&#34;method&#34;&amp;gt;<br/&gt;                   &amp;lt;li class=&#34;left&#34;&amp;gt;{ fn:concat(&#34;$&#34;, xs:string($v/xq:uri)) }&amp;lt;/li&amp;gt;<br/&gt;                   &amp;lt;li class=&#34;right&#34;&amp;gt;{ $v/xq:comment/xq:description/node() }&amp;lt;/li&amp;gt;<br/&gt;                 &amp;lt;/ul&amp;gt;<br/&gt;                 &amp;lt;ul&amp;gt;<br/&gt;                 { display:print-comment($v/xq:comment/xq:since, &#34;Since:&#34;, $local) }<br/&gt;                 { display:print-comment($v/xq:comment/xq:see, &#34;See:&#34;, $local) }<br/&gt;                 &amp;lt;/ul&amp;gt;<br/&gt;%09%09%09%09 {<br/&gt;%09%09%09%09   if ($display:XQDOC_LITE) then<br/&gt;                     (display:print-internal-variable-references($v, $local))<br/&gt;                   else<br/&gt;                     (display:print-internal-variable-references($v, $local),<br/&gt;                      display:print-external-variable-references($v, $local))<br/&gt;%09%09%09%09 }<br/&gt;                &amp;lt;/div&amp;gt;<br/&gt;       }       <br/&gt;       &amp;lt;/div&amp;gt;)<br/&gt;  else<br/&gt;    ()<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $uri as xs:string ,<br>&nbsp; $local as xs:boolean) as element()*<br><br></li></ul><p>  Construct the high-level xqDoc HTML for any global variables  declared in the module.  In addition, cross-reference  links will be included for the following:  <ul xmlns:xqdoc="http://www.xqdoc.org/1.0">  <li>Functions (contained in this module) that <i>use</i> this variable</li>  <li>Functions (not contained in this module) that <i>use</i> this variable</li>  </ul></p><ul><li>Parameters:</li><ul><li>$uri - the URI for the module<br></li><li>$local - indicates whether to build static HTML link for offline viewing or dynamic links for real-time viewing.<br></li></ul><li>Return:</li><ul><li> HTML. </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">http://www.w3.org/2005/xpath-functions</td><td>concat</td></tr><tr><td>doc</td></tr><tr><td>exists</td></tr></table></div><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">xqdoc-display.xqy</td><td><a href="#print-comment">print-comment</a></td></tr><tr><td><a href="#print-external-variable-references">print-external-variable-references</a></td></tr><tr><td><a href="#print-internal-variable-references">print-internal-variable-references</a></td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#print-module-control">print-module-control</a></td></tr></table></div><div class="methoddetail"><h6>Internal Variables used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Variable Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#$XQDOC_LITE">$XQDOC_LITE</a></td></tr></table></div></div>&nbsp;<div class="methoddetail" id="xqDoc-main"><h5><a name="xqDoc-main"></a>xqDoc-main</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('display:get-module-html($module, false())<br/&gt;')">
         view code
      </a></li><li class="right"></li></ul><ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>false</td></tr></table></div><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">xqdoc-display.xqy</td><td><a href="#get-module-html">get-module-html</a></td></tr></table></div></div>&nbsp;</div>&nbsp;<div align="left"><i>Created by xqDoc-Lite version 1.0 on Mon May 08 09:27:53 EDT 2006</i></div></body></html>