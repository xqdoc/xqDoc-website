<html xml:space="preserve"><head><title>xqDoc -- Code Sample</title></head><body xml:space="preserve"><pre>define function display:get-code-html($module as xs:string, $name as xs:string?, $local as xs:boolean) as element(){<br/>  &lt;html xml:space="preserve"&gt;<br/>    &lt;head&gt;<br/>      &lt;title&gt;xqDoc -- Code Sample&lt;/title&gt;<br/>    &lt;/head&gt;<br/>    &lt;body xml:space="preserve"&gt;<br/>    &lt;pre&gt;{<br/>      if (fn:empty($name)) then<br/>        let $body := fn:doc($module)/xq:xqdoc/xq:module<br/>        return    <br/>            if (fn:exists($body/*:body[@xml:space])) then<br/>              display:print-preserve-newlines(xs:string($body/*:body[@xml:space])) <br/>            else<br/>              ()<br/>      else<br/>        let $body := fn:doc($module)/xq:xqdoc/xq:functions/xq:function[xq:name = $name]   <br/>        return      <br/>          display:print-preserve-newlines(xs:string($body/*:body[@xml:space])) <br/>    }<br/>    &lt;/pre&gt;<br/>    &lt;/body&gt;<br/>  &lt;/html&gt;<br/>}<br/></pre></body></html>