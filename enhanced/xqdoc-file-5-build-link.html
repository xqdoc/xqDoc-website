<html xml:space="preserve"><head><title>xqDoc -- Code Sample</title></head><body xml:space="preserve"><pre>define function display:build-link($type as xs:string, $local as xs:boolean, $parms as xs:string*, $name as xs:string?) as element()?<br/>{<br/>  if ($type = "default") then<br/><br/>    if ($local = fn:true()) then<br/>      &lt;a href="default.html"&gt;<br/>         &lt;h1&gt;xqDoc Home&lt;/h1&gt;<br/>      &lt;/a&gt;<br/><br/>    else<br/>      &lt;a href="default.xqy"&gt;<br/>         xqDoc Home<br/>      &lt;/a&gt;<br/><br/>  else if ($type = "get-module") then<br/><br/>    if ($local = fn:true()) then<br/>      &lt;a href="{fn:concat('xqdoc-file-', xs:string(fn:index-of(display:get-module-uris(), $parms[1])), '.html',<br/>         if (fn:exists($parms[2])) then<br/>           fn:concat('#', $parms[2])<br/>         else<br/>           ()<br/>         )}"&gt;<br/>        { $name }<br/>      &lt;/a&gt;<br/><br/>    else<br/>      &lt;a href="{fn:concat('get-module.xqy?module=', $parms[1],<br/>         if (fn:exists($parms[2])) then<br/>           fn:concat('#', $parms[2])<br/>         else<br/>           ()<br/>         )}"&gt;<br/>        { $name }<br/>      &lt;/a&gt;<br/><br/><br/>  else if ($type = "get-code") then<br/><br/>    if ($local = fn:true()) then<br/>	if (fn:count($parms) &gt; 1) then<br/>        &lt;a href="{fn:concat("javascript:popUp('xqdoc-file-", xs:string(fn:index-of(display:get-module-uris(), $parms[1])), "-", $parms[2], ".html')")}"&gt;<br/>          view code<br/>        &lt;/a&gt;<br/>      else<br/>        &lt;a href="{fn:concat("javascript:popUp('xqdoc-file-", xs:string(fn:index-of(display:get-module-uris(), $parms[1])), "_source.html')")}"&gt;<br/>          view code<br/>        &lt;/a&gt;<br/><br/>    else<br/>      if (fn:count($parms) &gt; 1) then<br/>        &lt;a href="{fn:concat("javascript:popUp('get-code.xqy?module=", $parms[1], "&amp;#38;", "function=", $parms[2], "')")}"&gt;<br/>          view code<br/>        &lt;/a&gt;<br/>      else<br/>        &lt;a href="{fn:concat("javascript:popUp('get-code.xqy?module=", $parms[1], "')")}"&gt;<br/>          view code<br/>        &lt;/a&gt;<br/>  else<br/>    ()<br/><br/>}<br/></pre></body></html>