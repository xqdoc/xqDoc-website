<html xml:space="preserve"><head><title>xqDoc -- Code Sample</title></head><body xml:space="preserve"><pre>(:<br/> : Copyright (c)2005 Elsevier, Inc.<br/> :<br/> : Licensed under the Apache License, Version 2.0 (the "License");<br/> : you may not use this file except in compliance with the License.<br/> : You may obtain a copy of the License at<br/> :<br/> : http://www.apache.org/licenses/LICENSE-2.0<br/> :<br/> : Unless required by applicable law or agreed to in writing, software<br/> : distributed under the License is distributed on an "AS IS" BASIS,<br/> : WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/> : See the License for the specific language governing permissions and<br/> : limitations under the License.<br/> :<br/> : The use of the Apache License does not indicate that this project is<br/> : affiliated with the Apache Software Foundation.<br/> :)<br/><br/>(:~ <br/> :  This main module controls the presentation of the xqDoc information<br/> :  for the module. <br/> :  The mainline function invokes only the<br/> :  method to retrieve the xqDoc information for the specified 'module'. The 'module' <br/> :  parameter is extracted from the query-string.  A parameter of type xs:boolean <br/> :  is passed to indicate whether links on the page should be constructed <br/> :  to static HTML pages (for off-line viewing) or to XQuery scripts for dynamic<br/> :  real-time viewing.<br/> : <br/> :  @author Darin McBeath<br/> :  @since February 27, 2005<br/> :  @version 1.1<br/> :)<br/><br/>import module namespace display="xqdoc/xqdoc-display" at "xqdoc-display.xqy"<br/><br/>(: Disable caching and set content type :)<br/>xdmp:set-response-content-type("text/html"),<br/>xdmp:add-response-header("Pragma", "no-cache"),<br/>xdmp:add-response-header("Cache-Control", "no-cache"),<br/>xdmp:add-response-header("Expires", "0"),<br/><br/>let $module := xdmp:get-request-field("module")<br/>return<br/>  <br/>  display:get-module-html($module, false()) <br/><br/><br/><br/><br/></pre></body></html>