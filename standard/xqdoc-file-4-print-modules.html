<html xml:space="preserve"><head><title>xqDoc -- Code Sample</title></head><body xml:space="preserve"><pre>define function display:print-modules($local as xs:boolean) as element()+<br/>{<br/>  (&lt;div class="home"&gt;<br/>    {<br/>    if (fn:exists(fn:collection($display:XQDOC_COLLECTION)/xq:xqdoc/xq:module[@type="library"])) then<br/>      (&lt;h4&gt;Library Modules&lt;/h4&gt;,<br/>        &lt;br/&gt;,&lt;br/&gt;,<br/>        for $x in fn:collection($display:XQDOC_COLLECTION)/xq:xqdoc[xq:module/@type="library"]<br/>        order by $x/xq:module/xq:uri<br/>        return<br/>         ( display:build-link("get-module",<br/>                              $local, <br/>                              (fn:base-uri($x)),<br/>                               display:decode-uri(fn:string($x/xq:module/xq:uri))),<br/>           &lt;br/&gt; )<br/>        )           <br/>    else<br/>      ()<br/>    }<br/>    {<br/>    if (fn:exists(fn:collection($display:XQDOC_COLLECTION)/xq:xqdoc/xq:module[@type="main"])) then<br/>      (&lt;h4&gt;Main Modules&lt;/h4&gt;,<br/>        &lt;br/&gt;,&lt;br/&gt;,<br/>        for $x in fn:collection($display:XQDOC_COLLECTION)/xq:xqdoc[xq:module/@type="main"]<br/>        order by $x/xq:module/xq:uri<br/>        return<br/>         ( display:build-link("get-module",<br/>                               $local, <br/>                               (fn:base-uri($x)),<br/>                                display:decode-uri(xs:string($x/xq:module/xq:uri))),<br/>           &lt;br/&gt; )<br/>      )<br/>    else<br/>      ()<br/>    }<br/>    &lt;/div&gt;)<br/>}<br/></pre></body></html>