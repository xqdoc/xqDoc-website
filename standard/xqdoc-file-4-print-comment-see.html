<html xml:space="preserve"><head><title>xqDoc -- Code Sample</title></head><body xml:space="preserve"><pre>define function display:print-comment-see($entry as element(), $local as xs:boolean) as item()* <br/>{<br/>  let $tmp := fn:normalize-space(xs:string($entry))<br/>  let $tokens := fn:tokenize($tmp, ";")<br/>  return<br/><br/>  if (fn:count($tokens) = 1) then<br/><br/>    if (fn:not(fn:contains($tokens,"#")) and fn:exists(fn:doc($tokens))) then<br/><br/>        display:build-link("get-module",<br/>                           $local,<br/>                           $tokens,<br/>                           $tmp)<br/><br/>    else if (fn:starts-with($tokens, "http")) then<br/><br/>        &lt;a href="{$tokens}"&gt;{$tokens}&lt;/a&gt;<br/><br/>    else<br/><br/>        $entry/node()<br/><br/>  else if (fn:count($tokens) = 2) then<br/><br/>    if (fn:not(fn:contains($tokens[1],"#")) and fn:exists(fn:doc($tokens[1])//xq:functions/xq:function[xq:name = fn:normalize-space($tokens[2])])) then<br/><br/>        display:build-link("get-module",<br/>                           $local,<br/>                           $tokens,<br/>                           $tmp)<br/><br/>    else<br/><br/>      $entry/node()<br/><br/>  else if (fn:count($tokens) = 3) then<br/><br/>    if (fn:string-length($tokens[2]) = 0 and fn:not(fn:contains($tokens[1],"#")) and fn:exists(fn:doc($tokens[1]))) then<br/><br/>        display:build-link("get-module",<br/>                           $local,<br/>                           $tokens,<br/>                           $tokens[3])<br/><br/>    else if (fn:string-length($tokens[2]) = 0 and fn:starts-with($tokens[1], "http")) then<br/><br/>        &lt;a href="{$tokens[1]}"&gt;{$tokens[3]}&lt;/a&gt;<br/><br/>    else if (fn:string-length($tokens[2]) &gt; 0 and fn:not(fn:contains($tokens[1],"#")) and fn:exists(fn:doc($tokens[1])//xq:functions/xq:function[xq:name = fn:normalize-space($tokens[2])])) then<br/><br/>        display:build-link("get-module",<br/>                           $local,<br/>                           $tokens,<br/>                           $tokens[3])<br/><br/>    else<br/><br/>      $entry/node()<br/><br/>  else<br/><br/>    $entry/node()<br/>}<br/></pre></body></html>